

// https://github.com/eligrey/FileSaver.js
//(function(a,b){if("function"==typeof define&&define.amd)define([],b);else if("undefined"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){"use strict";function b(a,b){return"undefined"==typeof b?b={autoBom:!1}:"object"!=typeof b&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open("GET",a),d.responseType="blob",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error("could not download file")},d.send()}function d(a){var b=new XMLHttpRequest;b.open("HEAD",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent("click"))}catch(c){var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||("object"!=typeof window||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement("a");g=g||b.name||"download",j.download=g,j.rel="noopener","string"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target="_blank")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:"msSaveOrOpenBlob"in navigator?function(f,g,h){if(g=g||f.name||"download","string"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement("a");i.href=f,i.target="_blank",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),"string"==typeof b)return c(b,d,e);var h="application/octet-stream"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\/[\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&"undefined"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g,"undefined"!=typeof module&&(module.exports=g)});

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(e){var m=0;return function(){return m<e.length?{done:!1,value:e[m++]}:{done:!0}}};$jscomp.arrayIterator=function(e){return{next:$jscomp.arrayIteratorImpl(e)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,m,h){if(e==Array.prototype||e==Object.prototype)return e;e[m]=h.value;return e};$jscomp.getGlobal=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var m=0;m<e.length;++m){var h=e[m];if(h&&h.Math==Math)return h}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(e,m){var h=$jscomp.propertyToPolyfillSymbol[m];if(null==h)return e[m];h=e[h];return void 0!==h?h:e[m]};
$jscomp.polyfill=function(e,m,h,a){m&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(e,m,h,a):$jscomp.polyfillUnisolated(e,m,h,a))};$jscomp.polyfillUnisolated=function(e,m,h,a){h=$jscomp.global;e=e.split(".");for(a=0;a<e.length-1;a++){var b=e[a];b in h||(h[b]={});h=h[b]}e=e[e.length-1];a=h[e];m=m(a);m!=a&&null!=m&&$jscomp.defineProperty(h,e,{configurable:!0,writable:!0,value:m})};
$jscomp.polyfillIsolated=function(e,m,h,a){var b=e.split(".");e=1===b.length;a=b[0];a=!e&&a in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var g=0;g<b.length-1;g++){var d=b[g];d in a||(a[d]={});a=a[d]}b=b[b.length-1];h=$jscomp.IS_SYMBOL_NATIVE&&"es6"===h?a[b]:null;m=m(h);null!=m&&(e?$jscomp.defineProperty($jscomp.polyfills,b,{configurable:!0,writable:!0,value:m}):m!==h&&($jscomp.propertyToPolyfillSymbol[b]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(b):$jscomp.POLYFILL_PREFIX+b,b=$jscomp.propertyToPolyfillSymbol[b],
$jscomp.defineProperty(a,b,{configurable:!0,writable:!0,value:m})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(e){if(e)return e;var m=function(a,g){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:g})};m.prototype.toString=function(){return this.$jscomp$symbol$id_};var h=0,a=function(b){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new m("jscomp_symbol_"+(b||"")+"_"+h++,b)};return a},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var m="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),h=0;h<m.length;h++){var a=$jscomp.global[m[h]];"function"===typeof a&&"function"!=typeof a.prototype[e]&&$jscomp.defineProperty(a.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return e},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(e){e={next:e};e[Symbol.iterator]=function(){return this};return e};
require=function(){function e(m,h,a){function b(f,c){if(!h[f]){if(!m[f]){var k="function"==typeof require&&require;if(!c&&k)return k(f,!0);if(g)return g(f,!0);k=Error("Cannot find module '"+f+"'");throw k.code="MODULE_NOT_FOUND",k;}k=h[f]={exports:{}};m[f][0].call(k.exports,function(c){return b(m[f][1][c]||c)},k,k.exports,e,m,h,a)}return h[f].exports}for(var g="function"==typeof require&&require,d=0;d<a.length;d++)b(a[d]);return b}return e}()({1:[function(e,m,h){m.exports=function(a,b){for(var g=
Array(arguments.length-1),d=0,f=2,c=!0;f<arguments.length;)g[d++]=arguments[f++];return new Promise(function(k,f){g[d]=function(a){if(c)if(c=!1,a)f(a);else{for(var b=Array(arguments.length-1),l=0;l<b.length;)b[l++]=arguments[l];k.apply(null,b)}};try{a.apply(b||null,g)}catch(l){c&&(c=!1,f(l))}})}},{}],2:[function(e,m,h){h.length=function(a){var b=a.length;if(!b)return 0;for(var f=0;1<--b%4&&"="===a.charAt(b);)++f;return Math.ceil(3*a.length)/4-f};var a=Array(64),b=Array(123);for(e=0;64>e;)b[a[e]=26>
e?e+65:52>e?e+71:62>e?e-4:e-59|43]=e++;h.encode=function(b,d,f){for(var c=null,k=[],q=0,l=0,g;d<f;){var p=b[d++];switch(l){case 0:k[q++]=a[p>>2];g=(p&3)<<4;l=1;break;case 1:k[q++]=a[g|p>>4];g=(p&15)<<2;l=2;break;case 2:k[q++]=a[g|p>>6],k[q++]=a[p&63],l=0}8191<q&&((c||(c=[])).push(String.fromCharCode.apply(String,k)),q=0)}l&&(k[q++]=a[g],k[q++]=61,1===l&&(k[q++]=61));return c?(q&&c.push(String.fromCharCode.apply(String,k.slice(0,q))),c.join("")):String.fromCharCode.apply(String,k.slice(0,q))};h.decode=
function(a,d,f){for(var c=f,k=0,q,l=0;l<a.length;){var g=a.charCodeAt(l++);if(61===g&&1<k)break;if(void 0===(g=b[g]))throw Error("invalid encoding");switch(k){case 0:q=g;k=1;break;case 1:d[f++]=q<<2|(g&48)>>4;q=g;k=2;break;case 2:d[f++]=(q&15)<<4|(g&60)>>2;q=g;k=3;break;case 3:d[f++]=(q&3)<<6|g,k=0}}if(1===k)throw Error("invalid encoding");return f-c};h.test=function(a){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(a)}},{}],3:[function(e,m,h){function a(b,g){function d(b){if("string"!==
typeof b){var k=f();a.verbose&&console.log("codegen: "+k);k="return "+k;if(b){for(var l=Object.keys(b),g=Array(l.length+1),p=Array(l.length),r=0;r<l.length;)g[r]=l[r],p[r]=b[l[r++]];g[r]=k;return Function.apply(null,g).apply(null,p)}return Function(k)()}for(var e=Array(arguments.length-1),h=0;h<e.length;)e[h]=arguments[++h];h=0;b=b.replace(/%([%dfijs])/g,function(c,a){var b=e[h++];switch(a){case "d":case "f":return String(Number(b));case "i":return String(Math.floor(b));case "j":return JSON.stringify(b);
case "s":return String(b)}return"%"});if(h!==e.length)throw Error("parameter count mismatch");c.push(b);return d}function f(a){return"function "+(a||g||"")+"("+(b&&b.join(",")||"")+"){\n  "+c.join("\n  ")+"\n}"}"string"===typeof b&&(g=b,b=void 0);var c=[];d.toString=f;return d}m.exports=a;a.verbose=!1},{}],4:[function(e,m,h){function a(){this._listeners={}}m.exports=a;a.prototype.on=function(b,a,d){(this._listeners[b]||(this._listeners[b]=[])).push({fn:a,ctx:d||this});return this};a.prototype.off=
function(a,g){if(void 0===a)this._listeners={};else if(void 0===g)this._listeners[a]=[];else for(var b=this._listeners[a],f=0;f<b.length;)b[f].fn===g?b.splice(f,1):++f;return this};a.prototype.emit=function(a){var b=this._listeners[a];if(b){for(var d=[],f=1;f<arguments.length;)d.push(arguments[f++]);for(f=0;f<b.length;)b[f].fn.apply(b[f++].ctx,d)}return this}},{}],5:[function(e,m,h){function a(d,f,c){"function"===typeof f?(c=f,f={}):f||(f={});return c?!f.xhr&&g&&g.readFile?g.readFile(d,function(b,
q){return b&&"undefined"!==typeof XMLHttpRequest?a.xhr(d,f,c):b?c(b):c(null,f.binary?q:q.toString("utf8"))}):a.xhr(d,f,c):b(a,this,d,f)}m.exports=a;var b=e("@protobufjs/aspromise"),g=e("@protobufjs/inquire")("fs");a.xhr=function(a,b,c){var k=new XMLHttpRequest;k.onreadystatechange=function(){if(4===k.readyState){if(0!==k.status&&200!==k.status)return c(Error("status "+k.status));if(b.binary){var a=k.response;if(!a){a=[];for(var l=0;l<k.responseText.length;++l)a.push(k.responseText.charCodeAt(l)&255)}return c(null,
"undefined"!==typeof Uint8Array?new Uint8Array(a):a)}return c(null,k.responseText)}};b.binary&&("overrideMimeType"in k&&k.overrideMimeType("text/plain; charset=x-user-defined"),k.responseType="arraybuffer");k.open("GET",a);k.send()}},{"@protobufjs/aspromise":1,"@protobufjs/inquire":7}],6:[function(e,m,h){function a(c){"undefined"!==typeof Float32Array?function(){function a(c,a,b){d[0]=c;a[b]=g[0];a[b+1]=g[1];a[b+2]=g[2];a[b+3]=g[3]}function b(c,a,b){d[0]=c;a[b]=g[3];a[b+1]=g[2];a[b+2]=g[1];a[b+3]=
g[0]}function l(c,a){g[0]=c[a];g[1]=c[a+1];g[2]=c[a+2];g[3]=c[a+3];return d[0]}function f(c,a){g[3]=c[a];g[2]=c[a+1];g[1]=c[a+2];g[0]=c[a+3];return d[0]}var d=new Float32Array([-0]),g=new Uint8Array(d.buffer),e=128===g[3];c.writeFloatLE=e?a:b;c.writeFloatBE=e?b:a;c.readFloatLE=e?l:f;c.readFloatBE=e?f:l}():function(){function a(c,a,b,k){var l=0>a?1:0;l&&(a=-a);if(0===a)c(0<1/a?0:2147483648,b,k);else if(isNaN(a))c(2143289344,b,k);else if(3.4028234663852886E38<a)c((l<<31|2139095040)>>>0,b,k);else if(1.1754943508222875E-38>
a)c((l<<31|Math.round(a/1.401298464324817E-45))>>>0,b,k);else{var f=Math.floor(Math.log(a)/Math.LN2);c((l<<31|f+127<<23|Math.round(a*Math.pow(2,-f)*8388608)&8388607)>>>0,b,k)}}function q(c,a,b){b=c(a,b);c=2*(b>>31)+1;a=b>>>23&255;b&=8388607;return 255===a?b?NaN:Infinity*c:0===a?1.401298464324817E-45*c*b:c*Math.pow(2,a-150)*(b+8388608)}c.writeFloatLE=a.bind(null,b);c.writeFloatBE=a.bind(null,g);c.readFloatLE=q.bind(null,d);c.readFloatBE=q.bind(null,f)}();"undefined"!==typeof Float64Array?function(){function a(c,
a,b){d[0]=c;a[b]=g[0];a[b+1]=g[1];a[b+2]=g[2];a[b+3]=g[3];a[b+4]=g[4];a[b+5]=g[5];a[b+6]=g[6];a[b+7]=g[7]}function b(c,a,b){d[0]=c;a[b]=g[7];a[b+1]=g[6];a[b+2]=g[5];a[b+3]=g[4];a[b+4]=g[3];a[b+5]=g[2];a[b+6]=g[1];a[b+7]=g[0]}function l(c,a){g[0]=c[a];g[1]=c[a+1];g[2]=c[a+2];g[3]=c[a+3];g[4]=c[a+4];g[5]=c[a+5];g[6]=c[a+6];g[7]=c[a+7];return d[0]}function f(c,a){g[7]=c[a];g[6]=c[a+1];g[5]=c[a+2];g[4]=c[a+3];g[3]=c[a+4];g[2]=c[a+5];g[1]=c[a+6];g[0]=c[a+7];return d[0]}var d=new Float64Array([-0]),g=new Uint8Array(d.buffer),
e=128===g[7];c.writeDoubleLE=e?a:b;c.writeDoubleBE=e?b:a;c.readDoubleLE=e?l:f;c.readDoubleBE=e?f:l}():function(){function a(c,a,b,k,f,d){var l=0>k?1:0;l&&(k=-k);if(0===k)c(0,f,d+a),c(0<1/k?0:2147483648,f,d+b);else if(isNaN(k))c(0,f,d+a),c(2146959360,f,d+b);else if(1.7976931348623157E308<k)c(0,f,d+a),c((l<<31|2146435072)>>>0,f,d+b);else if(2.2250738585072014E-308>k)k/=4.9E-324,c(k>>>0,f,d+a),c((l<<31|k/4294967296)>>>0,f,d+b);else{var q=Math.floor(Math.log(k)/Math.LN2);1024===q&&(q=1023);k*=Math.pow(2,
-q);c(4503599627370496*k>>>0,f,d+a);c((l<<31|q+1023<<20|1048576*k&1048575)>>>0,f,d+b)}}function q(c,a,b,k,f){a=c(k,f+a);k=c(k,f+b);c=2*(k>>31)+1;b=k>>>20&2047;a=4294967296*(k&1048575)+a;return 2047===b?a?NaN:Infinity*c:0===b?4.9E-324*c*a:c*Math.pow(2,b-1075)*(a+4503599627370496)}c.writeDoubleLE=a.bind(null,b,0,4);c.writeDoubleBE=a.bind(null,g,4,0);c.readDoubleLE=q.bind(null,d,0,4);c.readDoubleBE=q.bind(null,f,4,0)}();return c}function b(c,a,b){a[b]=c&255;a[b+1]=c>>>8&255;a[b+2]=c>>>16&255;a[b+3]=
c>>>24}function g(c,a,b){a[b]=c>>>24;a[b+1]=c>>>16&255;a[b+2]=c>>>8&255;a[b+3]=c&255}function d(c,a){return(c[a]|c[a+1]<<8|c[a+2]<<16|c[a+3]<<24)>>>0}function f(a,b){return(a[b]<<24|a[b+1]<<16|a[b+2]<<8|a[b+3])>>>0}m.exports=a(a)},{}],7:[function(e,m,h){m.exports=function(a){try{var b=eval("quire".replace(/^/,"re"))(a);if(b&&(b.length||Object.keys(b).length))return b}catch(g){}return null}},{}],8:[function(e,m,h){var a=h.isAbsolute=function(a){return/^(?:\/|\w+:)/.test(a)},b=h.normalize=function(b){b=
b.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var d=b.split("/");b=a(b);var f="";b&&(f=d.shift()+"/");for(var c=0;c<d.length;)".."===d[c]?0<c&&".."!==d[c-1]?d.splice(--c,2):b?d.splice(c,1):++c:"."===d[c]?d.splice(c,1):++c;return f+d.join("/")};h.resolve=function(g,d,f){f||(d=b(d));if(a(d))return d;f||(g=b(g));return(g=g.replace(/(?:\/|^)[^/]+$/,"")).length?b(g+"/"+d):d}},{}],9:[function(e,m,h){m.exports=function(a,b,g){var d=g||8192,f=d>>>1,c=null,k=d;return function(q){if(1>q||q>f)return a(q);k+q>
d&&(c=a(d),k=0);q=b.call(c,k,k+=q);k&7&&(k=(k|7)+1);return q}}},{}],10:[function(e,m,h){h.length=function(a){for(var b=0,g,d=0;d<a.length;++d)g=a.charCodeAt(d),128>g?b+=1:2048>g?b+=2:55296===(g&64512)&&56320===(a.charCodeAt(d+1)&64512)?(++d,b+=4):b+=3;return b};h.read=function(a,b,g){if(1>g-b)return"";for(var d=null,f=[],c=0,k;b<g;)k=a[b++],128>k?f[c++]=k:191<k&&224>k?f[c++]=(k&31)<<6|a[b++]&63:239<k&&365>k?(k=((k&7)<<18|(a[b++]&63)<<12|(a[b++]&63)<<6|a[b++]&63)-65536,f[c++]=55296+(k>>10),f[c++]=
56320+(k&1023)):f[c++]=(k&15)<<12|(a[b++]&63)<<6|a[b++]&63,8191<c&&((d||(d=[])).push(String.fromCharCode.apply(String,f)),c=0);return d?(c&&d.push(String.fromCharCode.apply(String,f.slice(0,c))),d.join("")):String.fromCharCode.apply(String,f.slice(0,c))};h.write=function(a,b,g){for(var d=g,f,c,k=0;k<a.length;++k)f=a.charCodeAt(k),128>f?b[g++]=f:(2048>f?b[g++]=f>>6|192:(55296===(f&64512)&&56320===((c=a.charCodeAt(k+1))&64512)?(f=65536+((f&1023)<<10)+(c&1023),++k,b[g++]=f>>18|240,b[g++]=f>>12&63|128):
b[g++]=f>>12|224,b[g++]=f>>6&63|128),b[g++]=f&63|128);return g-d}},{}],11:[function(e,m,h){function a(g,d){b.test(g)||(g="google/protobuf/"+g+".proto",d={nested:{google:{nested:{protobuf:{nested:d}}}}});a[g]=d}m.exports=a;var b=/\/|\./;a("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});a("duration",{Duration:e={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}});a("timestamp",{Timestamp:e});a("empty",{Empty:{fields:{}}});a("struct",{Struct:{fields:{fields:{keyType:"string",
type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:"nullValue numberValue stringValue boolValue structValue listValue".split(" ")}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}});a("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",
id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}});a("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}});a.get=function(b){return a[b]||null}},{}],12:[function(e,m,h){function a(a,
c,b,d){if(c.resolvedType)if(c.resolvedType instanceof g){a("switch(d%s){",d);b=c.resolvedType.values;for(var f=Object.keys(b),k=0;k<f.length;++k)c.repeated&&b[f[k]]===c.typeDefault&&a("default:"),a("case%j:",f[k])("case %i:",b[f[k]])("m%s=%j",d,b[f[k]])("break");a("}")}else a('if(typeof d%s!=="object")',d)("throw TypeError(%j)",c.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",d,b,d);else switch(b=!1,c.type){case "double":case "float":a("m%s=Number(d%s)",d,d);break;case "uint32":case "fixed32":a("m%s=d%s>>>0",
d,d);break;case "int32":case "sint32":case "sfixed32":a("m%s=d%s|0",d,d);break;case "uint64":b=!0;case "int64":case "sint64":case "fixed64":case "sfixed64":a("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",d,d,b)('else if(typeof d%s==="string")',d)("m%s=parseInt(d%s,10)",d,d)('else if(typeof d%s==="number")',d)("m%s=d%s",d,d)('else if(typeof d%s==="object")',d)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",d,d,d,b?"true":"");break;case "bytes":a('if(typeof d%s==="string")',
d)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",d,d,d)("else if(d%s.length)",d)("m%s=d%s",d,d);break;case "string":a("m%s=String(d%s)",d,d);break;case "bool":a("m%s=Boolean(d%s)",d,d)}return a}function b(a,c,b,d){if(c.resolvedType)c.resolvedType instanceof g?a("d%s=o.enums===String?types[%i].values[m%s]:m%s",d,b,d,d):a("d%s=types[%i].toObject(m%s,o)",d,b,d);else switch(b=!1,c.type){case "double":case "float":a("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",d,d,d,d);break;
case "uint64":b=!0;case "int64":case "sint64":case "fixed64":case "sfixed64":a('if(typeof m%s==="number")',d)("d%s=o.longs===String?String(m%s):m%s",d,d,d)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",d,d,d,d,b?"true":"",d);break;case "bytes":a("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",d,d,d,d,d);break;default:a("d%s=m%s",d,d)}return a}
var g=e("./enum"),d=e("./util");h.fromObject=function(b){var c=b.fieldsArray;b=d.codegen(["d"],b.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!c.length)return b("return new this.ctor");b("var m=new this.ctor");for(var k=0;k<c.length;++k){var f=c[k].resolve(),l=d.safeProp(f.name);f.map?(b("if(d%s){",l)('if(typeof d%s!=="object")',l)("throw TypeError(%j)",f.fullName+": object expected")("m%s={}",l)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",l),a(b,f,k,l+"[ks[i]]")("}")("}")):
f.repeated?(b("if(d%s){",l)("if(!Array.isArray(d%s))",l)("throw TypeError(%j)",f.fullName+": array expected")("m%s=[]",l)("for(var i=0;i<d%s.length;++i){",l),a(b,f,k,l+"[i]")("}")("}")):(f.resolvedType instanceof g||b("if(d%s!=null){",l),a(b,f,k,l),f.resolvedType instanceof g||b("}"))}return b("return m")};h.toObject=function(a){var c=a.fieldsArray.slice().sort(d.compareFieldsById);if(!c.length)return d.codegen()("return {}");for(var k=d.codegen(["m","o"],a.name+"$toObject")("if(!o)")("o={}")("var d={}"),
f=[],l=[],e=[],p=0;p<c.length;++p)c[p].partOf||(c[p].resolve().repeated?f:c[p].map?l:e).push(c[p]);if(f.length){k("if(o.arrays||o.defaults){");for(p=0;p<f.length;++p)k("d%s=[]",d.safeProp(f[p].name));k("}")}if(l.length){k("if(o.objects||o.defaults){");for(p=0;p<l.length;++p)k("d%s={}",d.safeProp(l[p].name));k("}")}if(e.length){k("if(o.defaults){");for(p=0;p<e.length;++p)if(f=e[p],l=d.safeProp(f.name),f.resolvedType instanceof g)k("d%s=o.enums===String?%j:%j",l,f.resolvedType.valuesById[f.typeDefault],
f.typeDefault);else if(f["long"])k("if(util.Long){")("var n=new util.Long(%i,%i,%j)",f.typeDefault.low,f.typeDefault.high,f.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",l)("}else")("d%s=o.longs===String?%j:%i",l,f.typeDefault.toString(),f.typeDefault.toNumber());else if(f.bytes){var h="["+Array.prototype.slice.call(f.typeDefault).join(",")+"]";k("if(o.bytes===String)d%s=%j",l,String.fromCharCode.apply(String,f.typeDefault))("else{")("d%s=%s",l,h)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",
l,l)("}")}else k("d%s=%j",l,f.typeDefault);k("}")}e=!1;for(p=0;p<c.length;++p)f=c[p],h=a._fieldsArray.indexOf(f),l=d.safeProp(f.name),f.map?(e||(e=!0,k("var ks2")),k("if(m%s&&(ks2=Object.keys(m%s)).length){",l,l)("d%s={}",l)("for(var j=0;j<ks2.length;++j){"),b(k,f,h,l+"[ks2[j]]")("}")):f.repeated?(k("if(m%s&&m%s.length){",l,l)("d%s=[]",l)("for(var j=0;j<m%s.length;++j){",l),b(k,f,h,l+"[j]")("}")):(k("if(m%s!=null&&m.hasOwnProperty(%j)){",l,f.name),b(k,f,h,l),f.partOf&&k("if(o.oneofs)")("d%s=%j",d.safeProp(f.partOf.name),
f.name)),k("}");return k("return d")}},{"./enum":15,"./util":37}],13:[function(e,m,h){m.exports=function(d){var f=g.codegen(["r","l"],d.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(d.fieldsArray.filter(function(a){return a.map}).length?",k":""))("while(r.pos<c){")("var t=r.uint32()");d.group&&f("if((t&7)===4)")("break");f("switch(t>>>3){");for(var c=0;c<d.fieldsArray.length;++c){var k=d._fieldsArray[c].resolve(),e=k.resolvedType instanceof
a?"int32":k.type,l="m"+g.safeProp(k.name);f("case %i:",k.id);k.map?(f("r.skip().pos++")("if(%s===util.emptyObject)",l)("%s={}",l)("k=r.%s()",k.keyType)("r.pos++"),void 0!==b["long"][k.keyType]?void 0===b.basic[e]?f('%s[typeof k==="object"?util.longToHash(k):k]=types[%i].decode(r,r.uint32())',l,c):f('%s[typeof k==="object"?util.longToHash(k):k]=r.%s()',l,e):void 0===b.basic[e]?f("%s[k]=types[%i].decode(r,r.uint32())",l,c):f("%s[k]=r.%s()",l,e)):k.repeated?(f("if(!(%s&&%s.length))",l,l)("%s=[]",l),
void 0!==b.packed[e]&&f("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",l,e)("}else"),void 0===b.basic[e]?f(k.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",l,c):f("%s.push(r.%s())",l,e)):void 0===b.basic[e]?f(k.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",l,c):f("%s=r.%s()",l,e);f("break")}f("default:")("r.skipType(t&7)")("break")("}")("}");for(c=0;c<d._fieldsArray.length;++c)k=d._fieldsArray[c],
k.required&&f("if(!m.hasOwnProperty(%j))",k.name)("throw util.ProtocolError(%j,{instance:m})","missing required '"+k.name+"'");return f("return m")};var a=e("./enum"),b=e("./types"),g=e("./util")},{"./enum":15,"./types":36,"./util":37}],14:[function(e,m,h){function a(a,b,d,g){return b.resolvedType.group?a("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",d,g,(b.id<<3|3)>>>0,(b.id<<3|4)>>>0):a("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",d,g,(b.id<<3|2)>>>0)}m.exports=function(f){var c=d.codegen(["m",
"w"],f.name+"$encode")("if(!w)")("w=Writer.create()"),k,e=f.fieldsArray.slice().sort(d.compareFieldsById);for(k=0;k<e.length;++k){var l=e[k].resolve(),h=f._fieldsArray.indexOf(l),p=l.resolvedType instanceof b?"int32":l.type,r=g.basic[p];var m="m"+d.safeProp(l.name);l.map?(c("if(%s!=null&&m.hasOwnProperty(%j)){",m,l.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",m)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(l.id<<3|2)>>>0,8|g.mapKey[l.keyType],l.keyType),void 0===r?c("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",
h,m):c(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|r,p,m),c("}")("}")):l.repeated?(c("if(%s!=null&&%s.length){",m,m),l.packed&&void 0!==g.packed[p]?c("w.uint32(%i).fork()",(l.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",m)("w.%s(%s[i])",p,m)("w.ldelim()"):(c("for(var i=0;i<%s.length;++i)",m),void 0===r?a(c,l,h,m+"[i]"):c("w.uint32(%i).%s(%s[i])",(l.id<<3|r)>>>0,p,m)),c("}")):(l.optional&&c("if(%s!=null&&m.hasOwnProperty(%j))",m,l.name),void 0===r?a(c,l,h,m):c("w.uint32(%i).%s(%s)",(l.id<<3|r)>>>0,p,m))}return c("return w")};
var b=e("./enum"),g=e("./types"),d=e("./util")},{"./enum":15,"./types":36,"./util":37}],15:[function(e,m,h){function a(a,c,d,g,l){b.call(this,a,d);if(c&&"object"!==typeof c)throw TypeError("values must be an object");this.valuesById={};this.values=Object.create(this.valuesById);this.comment=g;this.comments=l||{};this.reserved=void 0;if(c)for(a=Object.keys(c),d=0;d<a.length;++d)"number"===typeof c[a[d]]&&(this.valuesById[this.values[a[d]]=c[a[d]]]=a[d])}m.exports=a;var b=e("./object");((a.prototype=
Object.create(b.prototype)).constructor=a).className="Enum";var g=e("./namespace"),d=e("./util");a.fromJSON=function(b,c){var d=new a(b,c.values,c.options,c.comment,c.comments);d.reserved=c.reserved;return d};a.prototype.toJSON=function(a){a=a?!!a.keepComments:!1;return d.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",a?this.comment:void 0,"comments",a?this.comments:void 0])};a.prototype.add=function(a,b,k){if(!d.isString(a))throw TypeError("name must be a string");
if(!d.isInteger(b))throw TypeError("id must be an integer");if(void 0!==this.values[a])throw Error("duplicate name '"+a+"' in "+this);if(this.isReservedId(b))throw Error("id "+b+" is reserved in "+this);if(this.isReservedName(a))throw Error("name '"+a+"' is reserved in "+this);if(void 0!==this.valuesById[b]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+b+" in "+this);this.values[a]=b}else this.valuesById[this.values[a]=b]=a;this.comments[a]=k||null;return this};a.prototype.remove=
function(a){if(!d.isString(a))throw TypeError("name must be a string");var b=this.values[a];if(null==b)throw Error("name '"+a+"' does not exist in "+this);delete this.valuesById[b];delete this.values[a];delete this.comments[a];return this};a.prototype.isReservedId=function(a){return g.isReservedId(this.reserved,a)};a.prototype.isReservedName=function(a){return g.isReservedName(this.reserved,a)}},{"./namespace":23,"./object":24,"./util":37}],16:[function(e,m,h){function a(a,c,g,e,h,m,G){f.isObject(e)?
(G=h,m=e,e=h=void 0):f.isObject(h)&&(G=m,m=h,h=void 0);b.call(this,a,m);if(!f.isInteger(c)||0>c)throw TypeError("id must be a non-negative integer");if(!f.isString(g))throw TypeError("type must be a string");if(void 0!==e&&!k.test(e=e.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==h&&!f.isString(h))throw TypeError("extend must be a string");this.rule=e&&"optional"!==e?e:void 0;this.type=g;this.id=c;this.extend=h||void 0;this.required="required"===e;this.optional=
!this.required;this.repeated="repeated"===e;this.map=!1;this.defaultValue=this.typeDefault=this.partOf=this.message=null;this["long"]=f.Long?void 0!==d["long"][g]:!1;this.bytes="bytes"===g;this._packed=this.declaringField=this.extensionField=this.resolvedType=null;this.comment=G}m.exports=a;var b=e("./object");((a.prototype=Object.create(b.prototype)).constructor=a).className="Field";var g=e("./enum"),d=e("./types"),f=e("./util"),c,k=/^required|optional|repeated$/;a.fromJSON=function(b,c){return new a(b,
c.id,c.type,c.rule,c.extend,c.options,c.comment)};Object.defineProperty(a.prototype,"packed",{get:function(){null===this._packed&&(this._packed=!1!==this.getOption("packed"));return this._packed}});a.prototype.setOption=function(a,c,d){"packed"===a&&(this._packed=null);return b.prototype.setOption.call(this,a,c,d)};a.prototype.toJSON=function(a){return f.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",a&&
a.keepComments?this.comment:void 0])};a.prototype.resolve=function(){if(this.resolved)return this;void 0===(this.typeDefault=d.defaults[this.type])&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.typeDefault=this.resolvedType instanceof c?null:this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]);this.options&&null!=this.options["default"]&&(this.typeDefault=this.options["default"],this.resolvedType instanceof g&&"string"===
typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault]));this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof g)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0));if(this["long"])this.typeDefault=f.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"===typeof this.typeDefault){var a;
f.base64.test(this.typeDefault)?f.base64.decode(this.typeDefault,a=f.newBuffer(f.base64.length(this.typeDefault)),0):f.utf8.write(this.typeDefault,a=f.newBuffer(f.utf8.length(this.typeDefault)),0);this.typeDefault=a}this.defaultValue=this.map?f.emptyObject:this.repeated?f.emptyArray:this.typeDefault;this.parent instanceof c&&(this.parent.ctor.prototype[this.name]=this.defaultValue);return b.prototype.resolve.call(this)};a.d=function(b,c,d,k){"function"===typeof c?c=f.decorateType(c).name:c&&"object"===
typeof c&&(c=f.decorateEnum(c).name);return function(l,g){f.decorateType(l.constructor).add(new a(g,b,c,d,{"default":k}))}};a._configure=function(a){c=a}},{"./enum":15,"./object":24,"./types":36,"./util":37}],17:[function(e,m,h){var a=m.exports=e("./index-minimal");a.build="light";a.load=function(b,g,d){"function"===typeof g?(d=g,g=new a.Root):g||(g=new a.Root);return g.load(b,d)};a.loadSync=function(b,g){g||(g=new a.Root);return g.loadSync(b)};a.encoder=e("./encoder");a.decoder=e("./decoder");a.verifier=
e("./verifier");a.converter=e("./converter");a.ReflectionObject=e("./object");a.Namespace=e("./namespace");a.Root=e("./root");a.Enum=e("./enum");a.Type=e("./type");a.Field=e("./field");a.OneOf=e("./oneof");a.MapField=e("./mapfield");a.Service=e("./service");a.Method=e("./method");a.Message=e("./message");a.wrappers=e("./wrappers");a.types=e("./types");a.util=e("./util");a.ReflectionObject._configure(a.Root);a.Namespace._configure(a.Type,a.Service,a.Enum);a.Root._configure(a.Type);a.Field._configure(a.Type)},
{"./converter":12,"./decoder":13,"./encoder":14,"./enum":15,"./field":16,"./index-minimal":18,"./mapfield":20,"./message":21,"./method":22,"./namespace":23,"./object":24,"./oneof":25,"./root":29,"./service":33,"./type":35,"./types":36,"./util":37,"./verifier":40,"./wrappers":41}],18:[function(e,m,h){function a(){b.Reader._configure(b.BufferReader);b.util._configure()}var b=h;b.build="minimal";b.Writer=e("./writer");b.BufferWriter=e("./writer_buffer");b.Reader=e("./reader");b.BufferReader=e("./reader_buffer");
b.util=e("./util/minimal");b.rpc=e("./rpc");b.roots=e("./roots");b.configure=a;b.Writer._configure(b.BufferWriter);a()},{"./reader":27,"./reader_buffer":28,"./roots":30,"./rpc":31,"./util/minimal":39,"./writer":42,"./writer_buffer":43}],19:[function(e,m,h){m=m.exports=e("./index-light");m.build="full";m.tokenize=e("./tokenize");m.parse=e("./parse");m.common=e("./common");m.Root._configure(m.Type,m.parse,m.common)},{"./common":11,"./index-light":17,"./parse":26,"./tokenize":34}],20:[function(e,m,h){function a(a,
c,k,g,l,e){b.call(this,a,c,g,void 0,void 0,l,e);if(!d.isString(k))throw TypeError("keyType must be a string");this.keyType=k;this.resolvedKeyType=null;this.map=!0}m.exports=a;var b=e("./field");((a.prototype=Object.create(b.prototype)).constructor=a).className="MapField";var g=e("./types"),d=e("./util");a.fromJSON=function(b,c){return new a(b,c.id,c.keyType,c.type,c.options,c.comment)};a.prototype.toJSON=function(a){return d.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",
this.extend,"options",this.options,"comment",a&&a.keepComments?this.comment:void 0])};a.prototype.resolve=function(){if(this.resolved)return this;if(void 0===g.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return b.prototype.resolve.call(this)};a.d=function(b,c,k){"function"===typeof k?k=d.decorateType(k).name:k&&"object"===typeof k&&(k=d.decorateEnum(k).name);return function(f,l){d.decorateType(f.constructor).add(new a(l,b,c,k))}}},{"./field":16,"./types":36,"./util":37}],21:[function(e,
m,h){function a(a){if(a)for(var b=Object.keys(a),f=0;f<b.length;++f)this[b[f]]=a[b[f]]}m.exports=a;var b=e("./util/minimal");a.create=function(a){return this.$type.create(a)};a.encode=function(a,b){return this.$type.encode(a,b)};a.encodeDelimited=function(a,b){return this.$type.encodeDelimited(a,b)};a.decode=function(a){return this.$type.decode(a)};a.decodeDelimited=function(a){return this.$type.decodeDelimited(a)};a.verify=function(a){return this.$type.verify(a)};a.fromObject=function(a){return this.$type.fromObject(a)};
a.toObject=function(a,b){return this.$type.toObject(a,b)};a.prototype.toJSON=function(){return this.$type.toObject(this,b.toJSONOptions)}},{"./util/minimal":39}],22:[function(e,m,h){function a(a,f,c,k,e,l,h,p){g.isObject(e)?(h=e,e=l=void 0):g.isObject(l)&&(h=l,l=void 0);if(void 0!==f&&!g.isString(f))throw TypeError("type must be a string");if(!g.isString(c))throw TypeError("requestType must be a string");if(!g.isString(k))throw TypeError("responseType must be a string");b.call(this,a,h);this.type=
f||"rpc";this.requestType=c;this.requestStream=e?!0:void 0;this.responseType=k;this.responseStream=l?!0:void 0;this.resolvedResponseType=this.resolvedRequestType=null;this.comment=p}m.exports=a;var b=e("./object");((a.prototype=Object.create(b.prototype)).constructor=a).className="Method";var g=e("./util");a.fromJSON=function(b,f){return new a(b,f.type,f.requestType,f.responseType,f.requestStream,f.responseStream,f.options,f.comment)};a.prototype.toJSON=function(a){return g.toObject(["type","rpc"!==
this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",a&&a.keepComments?this.comment:void 0])};a.prototype.resolve=function(){if(this.resolved)return this;this.resolvedRequestType=this.parent.lookupType(this.requestType);this.resolvedResponseType=this.parent.lookupType(this.responseType);return b.prototype.resolve.call(this)}},{"./object":24,"./util":37}],
23:[function(e,m,h){function a(a,b){if(a&&a.length){for(var c={},d=0;d<a.length;++d)c[a[d].name]=a[d].toJSON(b);return c}}function b(a,b){g.call(this,a,b);this.nested=void 0;this._nestedArray=null}m.exports=b;var g=e("./object");((b.prototype=Object.create(g.prototype)).constructor=b).className="Namespace";var d=e("./field"),f=e("./util"),c,k,q;b.fromJSON=function(a,c){return(new b(a,c.options)).addJSON(c.nested)};b.arrayToJSON=a;b.isReservedId=function(a,b){if(a)for(var c=0;c<a.length;++c)if("string"!==
typeof a[c]&&a[c][0]<=b&&a[c][1]>=b)return!0;return!1};b.isReservedName=function(a,b){if(a)for(var c=0;c<a.length;++c)if(a[c]===b)return!0;return!1};Object.defineProperty(b.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=f.toArray(this.nested))}});b.prototype.toJSON=function(b){return f.toObject(["options",this.options,"nested",a(this.nestedArray,b)])};b.prototype.addJSON=function(a){if(a)for(var f=Object.keys(a),l=0,e;l<f.length;++l)e=a[f[l]],this.add((void 0!==
e.fields?c.fromJSON:void 0!==e.values?q.fromJSON:void 0!==e.methods?k.fromJSON:void 0!==e.id?d.fromJSON:b.fromJSON)(f[l],e));return this};b.prototype.get=function(a){return this.nested&&this.nested[a]||null};b.prototype.getEnum=function(a){if(this.nested&&this.nested[a]instanceof q)return this.nested[a].values;throw Error("no such enum: "+a);};b.prototype.add=function(a){if(!(a instanceof d&&void 0!==a.extend||a instanceof c||a instanceof q||a instanceof k||a instanceof b))throw TypeError("object must be a valid nested object");
if(this.nested){var f=this.get(a.name);if(f)if(f instanceof b&&a instanceof b&&!(f instanceof c||f instanceof k)){for(var l=f.nestedArray,e=0;e<l.length;++e)a.add(l[e]);this.remove(f);this.nested||(this.nested={});a.setOptions(f.options,!0)}else throw Error("duplicate name '"+a.name+"' in "+this);}else this.nested={};this.nested[a.name]=a;a.onAdd(this);this._nestedArray=null;return this};b.prototype.remove=function(a){if(!(a instanceof g))throw TypeError("object must be a ReflectionObject");if(a.parent!==
this)throw Error(a+" is not a member of "+this);delete this.nested[a.name];Object.keys(this.nested).length||(this.nested=void 0);a.onRemove(this);this._nestedArray=null;return this};b.prototype.define=function(a,c){if(f.isString(a))a=a.split(".");else if(!Array.isArray(a))throw TypeError("illegal path");if(a&&a.length&&""===a[0])throw Error("path must be relative");for(var d=this;0<a.length;){var k=a.shift();if(d.nested&&d.nested[k]){if(d=d.nested[k],!(d instanceof b))throw Error("path conflicts with non-namespace objects");
}else d.add(d=new b(k))}c&&d.addJSON(c);return d};b.prototype.resolveAll=function(){for(var a=this.nestedArray,c=0;c<a.length;)a[c]instanceof b?a[c++].resolveAll():a[c++].resolve();return this.resolve()};b.prototype.lookup=function(a,c,d){"boolean"===typeof c?(d=c,c=void 0):c&&!Array.isArray(c)&&(c=[c]);if(f.isString(a)&&a.length){if("."===a)return this.root;a=a.split(".")}else if(!a.length)return this;if(""===a[0])return this.root.lookup(a.slice(1),c);var k=this.get(a[0]);if(k)if(1===a.length){if(!c||
-1<c.indexOf(k.constructor))return k}else{if(k instanceof b&&(k=k.lookup(a.slice(1),c,!0)))return k}else for(var e=0;e<this.nestedArray.length;++e)if(this._nestedArray[e]instanceof b&&(k=this._nestedArray[e].lookup(a,c,!0)))return k;return null===this.parent||d?null:this.parent.lookup(a,c)};b.prototype.lookupType=function(a){var b=this.lookup(a,[c]);if(!b)throw Error("no such type: "+a);return b};b.prototype.lookupEnum=function(a){var b=this.lookup(a,[q]);if(!b)throw Error("no such Enum '"+a+"' in "+
this);return b};b.prototype.lookupTypeOrEnum=function(a){var b=this.lookup(a,[c,q]);if(!b)throw Error("no such Type or Enum '"+a+"' in "+this);return b};b.prototype.lookupService=function(a){var b=this.lookup(a,[k]);if(!b)throw Error("no such Service '"+a+"' in "+this);return b};b._configure=function(a,b,d){c=a;k=b;q=d}},{"./field":16,"./object":24,"./util":37}],24:[function(e,m,h){function a(a,f){if(!b.isString(a))throw TypeError("name must be a string");if(f&&!b.isObject(f))throw TypeError("options must be an object");
this.options=f;this.name=a;this.parent=null;this.resolved=!1;this.filename=this.comment=null}m.exports=a;a.className="ReflectionObject";var b=e("./util"),g;Object.defineProperties(a.prototype,{root:{get:function(){for(var a=this;null!==a.parent;)a=a.parent;return a}},fullName:{get:function(){for(var a=[this.name],b=this.parent;b;)a.unshift(b.name),b=b.parent;return a.join(".")}}});a.prototype.toJSON=function(){throw Error();};a.prototype.onAdd=function(a){this.parent&&this.parent!==a&&this.parent.remove(this);
this.parent=a;this.resolved=!1;a=a.root;a instanceof g&&a._handleAdd(this)};a.prototype.onRemove=function(a){a=a.root;a instanceof g&&a._handleRemove(this);this.parent=null;this.resolved=!1};a.prototype.resolve=function(){if(this.resolved)return this;this.root instanceof g&&(this.resolved=!0);return this};a.prototype.getOption=function(a){if(this.options)return this.options[a]};a.prototype.setOption=function(a,b,c){c&&this.options&&void 0!==this.options[a]||((this.options||(this.options={}))[a]=b);
return this};a.prototype.setOptions=function(a,b){if(a)for(var c=Object.keys(a),d=0;d<c.length;++d)this.setOption(c[d],a[c[d]],b);return this};a.prototype.toString=function(){var a=this.constructor.className,b=this.fullName;return b.length?a+" "+b:a};a._configure=function(a){g=a}},{"./util":37}],25:[function(e,m,h){function a(a,b,d,f){Array.isArray(b)||(d=b,b=void 0);g.call(this,a,d);if(void 0!==b&&!Array.isArray(b))throw TypeError("fieldNames must be an Array");this.oneof=b||[];this.fieldsArray=
[];this.comment=f}function b(a){if(a.parent)for(var b=0;b<a.fieldsArray.length;++b)a.fieldsArray[b].parent||a.parent.add(a.fieldsArray[b])}m.exports=a;var g=e("./object");((a.prototype=Object.create(g.prototype)).constructor=a).className="OneOf";var d=e("./field"),f=e("./util");a.fromJSON=function(b,d){return new a(b,d.oneof,d.options,d.comment)};a.prototype.toJSON=function(a){return f.toObject(["options",this.options,"oneof",this.oneof,"comment",a&&a.keepComments?this.comment:void 0])};a.prototype.add=
function(a){if(!(a instanceof d))throw TypeError("field must be a Field");a.parent&&a.parent!==this.parent&&a.parent.remove(a);this.oneof.push(a.name);this.fieldsArray.push(a);a.partOf=this;b(this);return this};a.prototype.remove=function(a){if(!(a instanceof d))throw TypeError("field must be a Field");var b=this.fieldsArray.indexOf(a);if(0>b)throw Error(a+" is not a member of "+this);this.fieldsArray.splice(b,1);b=this.oneof.indexOf(a.name);-1<b&&this.oneof.splice(b,1);a.partOf=null;return this};
a.prototype.onAdd=function(a){g.prototype.onAdd.call(this,a);for(var c=0;c<this.oneof.length;++c){var d=a.get(this.oneof[c]);d&&!d.partOf&&(d.partOf=this,this.fieldsArray.push(d))}b(this)};a.prototype.onRemove=function(a){for(var b=0,c;b<this.fieldsArray.length;++b)(c=this.fieldsArray[b]).parent&&c.parent.remove(c);g.prototype.onRemove.call(this,a)};a.d=function(){for(var b=Array(arguments.length),d=0;d<arguments.length;)b[d]=arguments[d++];return function(c,d){f.decorateType(c.constructor).add(new a(d,
b));Object.defineProperty(c,d,{get:f.oneOfGetter(b),set:f.oneOfSetter(b)})}}},{"./field":16,"./object":24,"./util":37}],26:[function(e,m,h){function a(e,h,m){function u(b,n,c){var d=a.filename;c||(a.filename=null);return Error("illegal "+(n||"token")+" '"+b+"' ("+(d?d+", ":"")+"line "+S.line+")")}function B(){var a=[],b;do{if('"'!==(b=y())&&"'"!==b)throw u(b);a.push(y());w(b);b=U()}while('"'===b||"'"===b);return a.join("")}function H(a){var b=y();switch(b){case "'":case '"':return Z(b),B();case "true":case "TRUE":return!0;
case "false":case "FALSE":return!1}try{return n(b,!0)}catch(pa){if(a&&v.test(b))return b;throw u(b,"value");}}function I(a,b){var n,c;do!b||'"'!==(n=U())&&"'"!==n?a.push([c=t(y()),w("to",!0)?t(y()):c]):a.push(B());while(w(",",!0));w(";")}function n(a,b){var n=1;"-"===a.charAt(0)&&(n=-1,a=a.substring(1));switch(a){case "inf":case "INF":case "Inf":return Infinity*n;case "nan":case "NAN":case "Nan":case "NaN":return NaN;case "0":return 0}if(C.test(a))return n*parseInt(a,10);if(x.test(a))return n*parseInt(a,
16);if(P.test(a))return n*parseInt(a,8);if(Q.test(a))return n*parseFloat(a);throw u(a,"number",b);}function t(a,b){switch(a){case "max":case "MAX":case "Max":return 536870911;case "0":return 0}if(!b&&"-"===a.charAt(0))throw u(a,"id");if(G.test(a))return parseInt(a,10);if(A.test(a))return parseInt(a,16);if(R.test(a))return parseInt(a,8);throw u(a,"id");}function T(){var a=U();switch(a){case "weak":var b=ba||(ba=[]);y();break;case "public":y();default:b=ca||(ca=[])}a=B();w(";");b.push(a)}function K(a,
b){switch(b){case "option":return L(a,b),w(";"),!0;case "message":return ia(a,b),!0;case "enum":return ja(a,b),!0;case "service":return ka(a,b),!0;case "extend":return la(a,b),!0}return!1}function M(b,n,c){var d=S.line;b&&(b.comment=ha(),b.filename=a.filename);if(w("{",!0)){for(;"}"!==(b=y());)n(b);w(";",!0)}else c&&c(),w(";"),b&&"string"!==typeof b.comment&&(b.comment=ha(d))}function ia(a,b){if(!F.test(b=y()))throw u(b,"type name");var n=new d(b);M(n,function(a){if(!K(n,a))switch(a){case "map":N(n,
a);break;case "required":case "optional":case "repeated":V(n,a);break;case "oneof":J(n,a);break;case "extensions":I(n.extensions||(n.extensions=[]));break;case "reserved":I(n.reserved||(n.reserved=[]),!0);break;default:if(!X||!v.test(a))throw u(a);Z(a);V(n,"optional")}});a.add(n)}function V(a,b,n){var c=y();if("group"===c)ma(a,b);else{if(!v.test(c))throw u(c,"type");var d=y();if(!F.test(d))throw u(d,"name");d=da(d);w("=");var k=new f(d,t(y()),c,b,n);M(k,function(a){if("option"===a)L(k,a),w(";");else throw u(a);
},function(){ea(k)});a.add(k);X||!k.repeated||void 0===p.packed[c]&&void 0!==p.basic[c]||k.setOption("packed",!1,!0)}}function ma(b,n){var c=y();if(!F.test(c))throw u(c,"name");var k=r.lcFirst(c);c===k&&(c=r.ucFirst(c));w("=");var T=t(y()),e=new d(c);e.group=!0;c=new f(k,T,c,n);c.filename=a.filename;M(e,function(a){switch(a){case "option":L(e,a);w(";");break;case "required":case "optional":case "repeated":V(e,a);break;default:throw u(a);}});b.add(e).add(c)}function N(a){w("<");var b=y();if(void 0===
p.mapKey[b])throw u(b,"type");w(",");var n=y();if(!v.test(n))throw u(n,"type");w(">");var d=y();if(!F.test(d))throw u(d,"name");w("=");var f=new c(da(d),t(y()),b,n);M(f,function(a){if("option"===a)L(f,a),w(";");else throw u(a);},function(){ea(f)});a.add(f)}function J(a,b){if(!F.test(b=y()))throw u(b,"name");var n=new k(da(b));M(n,function(a){"option"===a?(L(n,a),w(";")):(Z(a),V(n,"optional"))});a.add(n)}function ja(a,b){if(!F.test(b=y()))throw u(b,"name");var n=new q(b);M(n,function(a){switch(a){case "option":L(n,
a);w(";");break;case "reserved":I(n.reserved||(n.reserved=[]),!0);break;default:na(n,a)}});a.add(n)}function na(a,b){if(!F.test(b))throw u(b,"name");w("=");var n=t(y(),!0),c={};M(c,function(a){if("option"===a)L(c,a),w(";");else throw u(a);},function(){ea(c)});a.add(b,n,c.comment)}function L(a,b){var n=w("(",!0);if(!v.test(b=y()))throw u(b,"name");var c=b;n&&(w(")"),c="("+c+")",b=U(),D.test(b)&&(c+=b,y()));w("=");fa(a,c)}function fa(a,b){if(w("{",!0)){do{if(!F.test(E=y()))throw u(E,"name");if("{"===
U())fa(a,b+"."+E);else if(w(":"),"{"===U())fa(a,b+"."+E);else{var n=H(!0);a.setOption&&a.setOption(b+"."+E,n)}w(",",!0)}while(!w("}",!0))}else n=H(!0),a.setOption&&a.setOption(b,n)}function ea(a){if(w("[",!0)){do L(a,"option");while(w(",",!0));w("]")}return a}function ka(a,b){if(!F.test(b=y()))throw u(b,"service name");var n=new l(b);M(n,function(a){if(!K(n,a))if("rpc"===a)oa(n,a);else throw u(a);});a.add(n)}function oa(a,b){var n=b;if(!F.test(b=y()))throw u(b,"name");var c=b,d,t;w("(");w("stream",
!0)&&(d=!0);if(!v.test(b=y()))throw u(b);var f=b;w(")");w("returns");w("(");w("stream",!0)&&(t=!0);if(!v.test(b=y()))throw u(b);var k=b;w(")");var T=new z(c,n,f,k,d,t);M(T,function(a){if("option"===a)L(T,a),w(";");else throw u(a);});a.add(T)}function la(a,b){if(!v.test(b=y()))throw u(b,"reference");var n=b;M(null,function(b){switch(b){case "required":case "repeated":case "optional":V(a,b,n);break;default:if(!X||!v.test(b))throw u(b);Z(b);V(a,"optional",n)}})}h instanceof g||(m=h,h=new g);m||(m=a.defaults);
var S=b(e,m.alternateCommentMode||!1),y=S.next,Z=S.push,U=S.peek,w=S.skip,ha=S.cmnt;e=!0;for(var W,ca,ba,Y,X=!1,aa=h,da=m.keepCase?function(a){return a}:r.camelCase,E;null!==(E=y());)switch(E){case "package":if(!e)throw u(E);if(void 0!==W)throw u("package");W=y();if(!v.test(W))throw u(W,"name");aa=aa.define(W);w(";");break;case "import":if(!e)throw u(E);T();break;case "syntax":if(!e)throw u(E);w("=");Y=B();X="proto3"===Y;if(!X&&"proto2"!==Y)throw u(Y,"syntax");w(";");break;case "option":if(!e)throw u(E);
L(aa,E);w(";");break;default:if(K(aa,E))e=!1;else throw u(E);}a.filename=null;return{"package":W,imports:ca,weakImports:ba,syntax:Y,root:h}}m.exports=a;a.filename=null;a.defaults={keepCase:!1};var b=e("./tokenize"),g=e("./root"),d=e("./type"),f=e("./field"),c=e("./mapfield"),k=e("./oneof"),q=e("./enum"),l=e("./service"),z=e("./method"),p=e("./types"),r=e("./util"),C=/^[1-9][0-9]*$/,G=/^-?[1-9][0-9]*$/,x=/^0[x][0-9a-fA-F]+$/,A=/^-?0[x][0-9a-fA-F]+$/,P=/^0[0-7]+$/,R=/^-?0[0-7]+$/,Q=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,
F=/^[a-zA-Z_][a-zA-Z_0-9]*$/,v=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,D=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/},{"./enum":15,"./field":16,"./mapfield":20,"./method":22,"./oneof":25,"./root":29,"./service":33,"./tokenize":34,"./type":35,"./types":36,"./util":37}],27:[function(e,m,h){function a(a,b){return RangeError("index out of range: "+a.pos+" + "+(b||1)+" > "+a.len)}function b(a){this.buf=a;this.pos=0;this.len=a.length}function g(){var b=new q(0,0),c=0;if(4<this.len-this.pos){for(;4>
c;++c)if(b.lo=(b.lo|(this.buf[this.pos]&127)<<7*c)>>>0,128>this.buf[this.pos++])return b;b.lo=(b.lo|(this.buf[this.pos]&127)<<28)>>>0;b.hi=(b.hi|(this.buf[this.pos]&127)>>4)>>>0;if(128>this.buf[this.pos++])return b;c=0}else{for(;3>c;++c){if(this.pos>=this.len)throw a(this);b.lo=(b.lo|(this.buf[this.pos]&127)<<7*c)>>>0;if(128>this.buf[this.pos++])return b}b.lo=(b.lo|(this.buf[this.pos++]&127)<<7*c)>>>0;return b}if(4<this.len-this.pos)for(;5>c;++c){if(b.hi=(b.hi|(this.buf[this.pos]&127)<<7*c+3)>>>0,
128>this.buf[this.pos++])return b}else for(;5>c;++c){if(this.pos>=this.len)throw a(this);b.hi=(b.hi|(this.buf[this.pos]&127)<<7*c+3)>>>0;if(128>this.buf[this.pos++])return b}throw Error("invalid varint encoding");}function d(a,b){return(a[b-4]|a[b-3]<<8|a[b-2]<<16|a[b-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new q(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}m.exports=b;var c=e("./util/minimal"),k,q=c.LongBits,l=c.utf8,z="undefined"!==typeof Uint8Array?function(a){if(a instanceof
Uint8Array||Array.isArray(a))return new b(a);throw Error("illegal buffer");}:function(a){if(Array.isArray(a))return new b(a);throw Error("illegal buffer");};b.create=c.Buffer?function(a){return(b.create=function(a){return c.Buffer.isBuffer(a)?new k(a):z(a)})(a)}:z;b.prototype._slice=c.Array.prototype.subarray||c.Array.prototype.slice;b.prototype.uint32=function(){var b=4294967295;return function(){b=(this.buf[this.pos]&127)>>>0;if(128>this.buf[this.pos++])return b;b=(b|(this.buf[this.pos]&127)<<7)>>>
0;if(128>this.buf[this.pos++])return b;b=(b|(this.buf[this.pos]&127)<<14)>>>0;if(128>this.buf[this.pos++])return b;b=(b|(this.buf[this.pos]&127)<<21)>>>0;if(128>this.buf[this.pos++])return b;b=(b|(this.buf[this.pos]&15)<<28)>>>0;if(128>this.buf[this.pos++])return b;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return b}}();b.prototype.int32=function(){return this.uint32()|0};b.prototype.sint32=function(){var a=this.uint32();return a>>>1^-(a&1)|0};b.prototype.bool=function(){return 0!==
this.uint32()};b.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return d(this.buf,this.pos+=4)};b.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return d(this.buf,this.pos+=4)|0};b.prototype["float"]=function(){if(this.pos+4>this.len)throw a(this,4);var b=c["float"].readFloatLE(this.buf,this.pos);this.pos+=4;return b};b.prototype["double"]=function(){if(this.pos+8>this.len)throw a(this,4);var b=c["float"].readDoubleLE(this.buf,this.pos);this.pos+=8;return b};
b.prototype.bytes=function(){var b=this.uint32(),c=this.pos,d=this.pos+b;if(d>this.len)throw a(this,b);this.pos+=b;return Array.isArray(this.buf)?this.buf.slice(c,d):c===d?new this.buf.constructor(0):this._slice.call(this.buf,c,d)};b.prototype.string=function(){var a=this.bytes();return l.read(a,0,a.length)};b.prototype.skip=function(b){if("number"===typeof b){if(this.pos+b>this.len)throw a(this,b);this.pos+=b}else{do if(this.pos>=this.len)throw a(this);while(this.buf[this.pos++]&128)}return this};
b.prototype.skipType=function(a){switch(a){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!==(a=this.uint32()&7);)this.skipType(a);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+a+" at offset "+this.pos);}return this};b._configure=function(a){k=a;var d=c.Long?"toLong":"toNumber";c.merge(b.prototype,{int64:function(){return g.call(this)[d](!1)},uint64:function(){return g.call(this)[d](!0)},sint64:function(){return g.call(this).zzDecode()[d](!1)},
fixed64:function(){return f.call(this)[d](!0)},sfixed64:function(){return f.call(this)[d](!1)}})}},{"./util/minimal":39}],28:[function(e,m,h){function a(a){b.call(this,a)}m.exports=a;var b=e("./reader");(a.prototype=Object.create(b.prototype)).constructor=a;e=e("./util/minimal");e.Buffer&&(a.prototype._slice=e.Buffer.prototype.slice);a.prototype.string=function(){var a=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+a,this.len))}},{"./reader":27,"./util/minimal":39}],29:[function(e,
m,h){function a(a){d.call(this,"",a);this.deferred=[];this.files=[]}function b(){}function g(a,b){var c=b.parent.lookup(b.extend);if(c){var d=new f(b.fullName,b.id,b.type,b.rule,void 0,b.options);d.declaringField=b;b.extensionField=d;c.add(d);return!0}return!1}m.exports=a;var d=e("./namespace");((a.prototype=Object.create(d.prototype)).constructor=a).className="Root";var f=e("./field"),c=e("./enum"),k=e("./oneof"),q=e("./util"),l,z,p;a.fromJSON=function(b,c){c||(c=new a);b.options&&c.setOptions(b.options);
return c.addJSON(b.nested)};a.prototype.resolvePath=q.path.resolve;a.prototype.load=function P(a,c,d){function f(a,b){if(d){var c=d;d=null;if(l)throw a;c(a,b)}}function k(a,b){try{if(q.isString(b)&&"{"===b.charAt(0)&&(b=JSON.parse(b)),q.isString(b)){z.filename=a;var d=z(b,g,c),k,n=0;if(d.imports)for(;n<d.imports.length;++n)(k=g.resolvePath(a,d.imports[n]))&&e(k);if(d.weakImports)for(n=0;n<d.weakImports.length;++n)(k=g.resolvePath(a,d.weakImports[n]))&&e(k,!0)}else g.setOptions(b.options).addJSON(b.nested)}catch(t){f(t)}l||
h||f(null,g)}function e(a,b){var c=a.lastIndexOf("google/protobuf/");-1<c&&(c=a.substring(c),c in p&&(a=c));if(!(-1<g.files.indexOf(a)))if(g.files.push(a),a in p)l?k(a,p[a]):(++h,setTimeout(function(){--h;k(a,p[a])}));else if(l){try{var e=q.fs.readFileSync(a).toString("utf8")}catch(n){b||f(n);return}k(a,e)}else++h,q.fetch(a,function(c,t){--h;d&&(c?b?h||f(null,g):f(c):k(a,t))})}"function"===typeof c&&(d=c,c=void 0);var g=this;if(!d)return q.asPromise(P,g,a,c);var l=d===b,h=0;q.isString(a)&&(a=[a]);
for(var m=0,x;m<a.length;++m)(x=g.resolvePath("",a[m]))&&e(x);if(l)return g;h||f(null,g)};a.prototype.loadSync=function(a,c){if(!q.isNode)throw Error("not supported");return this.load(a,c,b)};a.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(a){return"'extend "+a.extend+"' in "+a.parent.fullName}).join(", "));return d.prototype.resolveAll.call(this)};var r=/^[A-Z]/;a.prototype._handleAdd=function(a){if(a instanceof f)void 0===
a.extend||a.extensionField||g(this,a)||this.deferred.push(a);else if(a instanceof c)r.test(a.name)&&(a.parent[a.name]=a.values);else if(!(a instanceof k)){if(a instanceof l)for(var b=0;b<this.deferred.length;)g(this,this.deferred[b])?this.deferred.splice(b,1):++b;for(b=0;b<a.nestedArray.length;++b)this._handleAdd(a._nestedArray[b]);r.test(a.name)&&(a.parent[a.name]=a)}};a.prototype._handleRemove=function(a){if(a instanceof f)void 0!==a.extend&&(a.extensionField?(a.extensionField.parent.remove(a.extensionField),
a.extensionField=null):(a=this.deferred.indexOf(a),-1<a&&this.deferred.splice(a,1)));else if(a instanceof c)r.test(a.name)&&delete a.parent[a.name];else if(a instanceof d){for(var b=0;b<a.nestedArray.length;++b)this._handleRemove(a._nestedArray[b]);r.test(a.name)&&delete a.parent[a.name]}};a._configure=function(a,b,c){l=a;z=b;p=c}},{"./enum":15,"./field":16,"./namespace":23,"./oneof":25,"./util":37}],30:[function(e,m,h){m.exports={}},{}],31:[function(e,m,h){h.Service=e("./rpc/service")},{"./rpc/service":32}],
32:[function(e,m,h){function a(a,d,f){if("function"!==typeof a)throw TypeError("rpcImpl must be a function");b.EventEmitter.call(this);this.rpcImpl=a;this.requestDelimited=!!d;this.responseDelimited=!!f}m.exports=a;var b=e("../util/minimal");(a.prototype=Object.create(b.EventEmitter.prototype)).constructor=a;a.prototype.rpcCall=function l(a,f,c,k,e){if(!k)throw TypeError("request must be specified");var d=this;if(!e)return b.asPromise(l,d,a,f,c,k);if(d.rpcImpl)try{return d.rpcImpl(a,f[d.requestDelimited?
"encodeDelimited":"encode"](k).finish(),function(b,f){if(b)return d.emit("error",b,a),e(b);if(null===f)d.end(!0);else{if(!(f instanceof c))try{f=c[d.responseDelimited?"decodeDelimited":"decode"](f)}catch(C){return d.emit("error",C,a),e(C)}d.emit("data",f,a);return e(null,f)}})}catch(p){d.emit("error",p,a),setTimeout(function(){e(p)},0)}else setTimeout(function(){e(Error("already ended"))},0)};a.prototype.end=function(a){this.rpcImpl&&(a||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off());
return this}},{"../util/minimal":39}],33:[function(e,m,h){function a(a,d){b.call(this,a,d);this.methods={};this._methodsArray=null}m.exports=a;var b=e("./namespace");((a.prototype=Object.create(b.prototype)).constructor=a).className="Service";var g=e("./method"),d=e("./util"),f=e("./rpc");a.fromJSON=function(b,d){var c=new a(b,d.options);if(d.methods)for(var f=Object.keys(d.methods),k=0;k<f.length;++k)c.add(g.fromJSON(f[k],d.methods[f[k]]));d.nested&&c.addJSON(d.nested);c.comment=d.comment;return c};
a.prototype.toJSON=function(a){var c=b.prototype.toJSON.call(this,a),f=a?!!a.keepComments:!1;return d.toObject(["options",c&&c.options||void 0,"methods",b.arrayToJSON(this.methodsArray,a)||{},"nested",c&&c.nested||void 0,"comment",f?this.comment:void 0])};Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=d.toArray(this.methods))}});a.prototype.get=function(a){return this.methods[a]||b.prototype.get.call(this,a)};a.prototype.resolveAll=
function(){for(var a=this.methodsArray,d=0;d<a.length;++d)a[d].resolve();return b.prototype.resolve.call(this)};a.prototype.add=function(a){if(this.get(a.name))throw Error("duplicate name '"+a.name+"' in "+this);return a instanceof g?(this.methods[a.name]=a,a.parent=this,this._methodsArray=null,this):b.prototype.add.call(this,a)};a.prototype.remove=function(a){if(a instanceof g){if(this.methods[a.name]!==a)throw Error(a+" is not a member of "+this);delete this.methods[a.name];this._methodsArray=a.parent=
null;return this}return b.prototype.remove.call(this,a)};a.prototype.create=function(a,b,e){a=new f.Service(a,b,e);for(b=0;b<this.methodsArray.length;++b){var c=d.lcFirst((e=this._methodsArray[b]).resolve().name).replace(/[^$\w_]/g,"");a[c]=d.codegen(["r","c"],d.isReserved(c)?c+"_":c)("return this.rpcCall(m,q,s,r,c)")({m:e,q:e.resolvedRequestType.ctor,s:e.resolvedResponseType.ctor})}return a}},{"./method":22,"./namespace":23,"./rpc":31,"./util":37}],34:[function(e,m,h){function a(a){return a.replace(z,
function(a,b){switch(b){case "\\":case "":return b;default:return p[b]||""}})}function b(b,e){function h(a){return Error("illegal "+a+" (line "+B+")")}function m(a,d){C=b.charAt(a++);u=B;O=!1;var n=a-(e?2:3),t;do if(0>--n||"\n"===(t=b.charAt(n))){O=!0;break}while(" "===t||"\t"===t);n=b.substring(a,d).split(q);for(t=0;t<n.length;++t)n[t]=n[t].replace(e?k:c,"").trim();J=n.join("\n").trim()}function p(a){var c=z(a);a=b.substring(a,c);return/^\s*\/{1,2}/.test(a)}function z(a){for(;a<D&&"\n"!==b.charAt(a);)a++;
return a}function R(){if(0<H.length)return H.shift();if(I){var c="'"===I?f:d;c.lastIndex=v-1;var t=c.exec(b);if(!t)throw h("string");v=c.lastIndex;Q(I);I=null;return a(t[1])}do{if(v===D)return null;for(t=!1;l.test(c=b.charAt(v));)if("\n"===c&&++B,++v===D)return null;if("/"===b.charAt(v)){if(++v===D)throw h("comment");if("/"===b.charAt(v)){if(e){var k=v;var K=!1;if(p(v)){K=!0;do{v=z(v);if(v===D)break;v++}while(p(v))}else v=Math.min(D,z(v)+1);K&&m(k,v);B++}else{for(K="/"===b.charAt(k=v+1);"\n"!==b.charAt(++v);)if(v===
D)return null;++v;K&&m(k,v-1);++B}t=!0}else if("*"===(c=b.charAt(v))){k=v+1;K=e||"*"===b.charAt(k);do{"\n"===c&&++B;if(++v===D)throw h("comment");t=c;c=b.charAt(v)}while("*"!==t||"/"!==c);++v;K&&m(k,v-2);t=!0}else return"/"}}while(t);c=v;g.lastIndex=0;if(!g.test(b.charAt(c++)))for(;c<D&&!g.test(b.charAt(c));)++c;c=b.substring(v,v=c);if('"'===c||"'"===c)I=c;return c}function Q(a){H.push(a)}function r(){if(!H.length){var a=R();if(null===a)return null;Q(a)}return H[0]}b=b.toString();var v=0,D=b.length,
B=1,C=null,J=null,u=0,O=!1,H=[],I=null;return Object.defineProperty({next:R,peek:r,push:Q,skip:function(a,b){var c=r();if(c===a)return R(),!0;if(!b)throw h("token '"+c+"', '"+a+"' expected");return!1},cmnt:function(a){var b=null;void 0===a?u===B-1&&(e||"*"===C||O)&&(b=J):(u<a&&r(),u!==a||O||!e&&"/"!==C||(b=J));return b}},"line",{get:function(){return B}})}m.exports=b;var g=/[\s{}=;:[\],'"()<>]/g,d=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,f=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,c=/^ *[*/]+ */,k=/^\s*\*?\/*/,
q=/\n/g,l=/\s/,z=/\\(.?)/g,p={0:"\x00",r:"\r",n:"\n",t:"\t"};b.unescape=a},{}],35:[function(e,m,h){function a(a,b){g.call(this,a,b);this.fields={};this.group=this.reserved=this.extensions=this.oneofs=void 0;this._ctor=this._oneofsArray=this._fieldsArray=this._fieldsById=null}function b(a){a._fieldsById=a._fieldsArray=a._oneofsArray=null;delete a.encode;delete a.decode;delete a.verify;return a}m.exports=a;var g=e("./namespace");((a.prototype=Object.create(g.prototype)).constructor=a).className="Type";
var d=e("./enum"),f=e("./oneof"),c=e("./field"),k=e("./mapfield"),q=e("./service"),l=e("./message"),z=e("./reader"),p=e("./writer"),r=e("./util"),C=e("./encoder"),G=e("./decoder"),x=e("./verifier"),A=e("./converter"),P=e("./wrappers");Object.defineProperties(a.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var a=Object.keys(this.fields),b=0;b<a.length;++b){var c=this.fields[a[b]],d=c.id;if(this._fieldsById[d])throw Error("duplicate id "+d+
" in "+this);this._fieldsById[d]=c}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=r.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=r.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=a.generateConstructor(this)())},set:function(a){var b=a.prototype;b instanceof l||((a.prototype=new l).constructor=a,r.merge(a.prototype,b));a.$type=a.prototype.$type=this;r.merge(a,l,!0);this._ctor=
a;for(b=0;b<this.fieldsArray.length;++b)this._fieldsArray[b].resolve();var c={};for(b=0;b<this.oneofsArray.length;++b)c[this._oneofsArray[b].resolve().name]={get:r.oneOfGetter(this._oneofsArray[b].oneof),set:r.oneOfSetter(this._oneofsArray[b].oneof)};b&&Object.defineProperties(a.prototype,c)}}});a.generateConstructor=function(a){for(var b=r.codegen(["p"],a.name),c=0,d;c<a.fieldsArray.length;++c)(d=a._fieldsArray[c]).map?b("this%s={}",r.safeProp(d.name)):d.repeated&&b("this%s=[]",r.safeProp(d.name));
return b("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};a.fromJSON=function(b,e){var l=new a(b,e.options);l.extensions=e.extensions;l.reserved=e.reserved;for(var h=Object.keys(e.fields),m=0;m<h.length;++m)l.add(("undefined"!==typeof e.fields[h[m]].keyType?k.fromJSON:c.fromJSON)(h[m],e.fields[h[m]]));if(e.oneofs)for(h=Object.keys(e.oneofs),m=0;m<h.length;++m)l.add(f.fromJSON(h[m],e.oneofs[h[m]]));if(e.nested)for(h=Object.keys(e.nested),m=0;m<h.length;++m){var x=
e.nested[h[m]];l.add((void 0!==x.id?c.fromJSON:void 0!==x.fields?a.fromJSON:void 0!==x.values?d.fromJSON:void 0!==x.methods?q.fromJSON:g.fromJSON)(h[m],x))}e.extensions&&e.extensions.length&&(l.extensions=e.extensions);e.reserved&&e.reserved.length&&(l.reserved=e.reserved);e.group&&(l.group=!0);e.comment&&(l.comment=e.comment);return l};a.prototype.toJSON=function(a){var b=g.prototype.toJSON.call(this,a),c=a?!!a.keepComments:!1;return r.toObject(["options",b&&b.options||void 0,"oneofs",g.arrayToJSON(this.oneofsArray,
a),"fields",g.arrayToJSON(this.fieldsArray.filter(function(a){return!a.declaringField}),a)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",b&&b.nested||void 0,"comment",c?this.comment:void 0])};a.prototype.resolveAll=function(){for(var a=this.fieldsArray,b=0;b<a.length;)a[b++].resolve();a=this.oneofsArray;for(b=0;b<a.length;)a[b++].resolve();return g.prototype.resolveAll.call(this)};
a.prototype.get=function(a){return this.fields[a]||this.oneofs&&this.oneofs[a]||this.nested&&this.nested[a]||null};a.prototype.add=function(a){if(this.get(a.name))throw Error("duplicate name '"+a.name+"' in "+this);if(a instanceof c&&void 0===a.extend){if(this._fieldsById?this._fieldsById[a.id]:this.fieldsById[a.id])throw Error("duplicate id "+a.id+" in "+this);if(this.isReservedId(a.id))throw Error("id "+a.id+" is reserved in "+this);if(this.isReservedName(a.name))throw Error("name '"+a.name+"' is reserved in "+
this);a.parent&&a.parent.remove(a);this.fields[a.name]=a;a.message=this;a.onAdd(this);return b(this)}return a instanceof f?(this.oneofs||(this.oneofs={}),this.oneofs[a.name]=a,a.onAdd(this),b(this)):g.prototype.add.call(this,a)};a.prototype.remove=function(a){if(a instanceof c&&void 0===a.extend){if(!this.fields||this.fields[a.name]!==a)throw Error(a+" is not a member of "+this);delete this.fields[a.name];a.parent=null;a.onRemove(this);return b(this)}if(a instanceof f){if(!this.oneofs||this.oneofs[a.name]!==
a)throw Error(a+" is not a member of "+this);delete this.oneofs[a.name];a.parent=null;a.onRemove(this);return b(this)}return g.prototype.remove.call(this,a)};a.prototype.isReservedId=function(a){return g.isReservedId(this.reserved,a)};a.prototype.isReservedName=function(a){return g.isReservedName(this.reserved,a)};a.prototype.create=function(a){return new this.ctor(a)};a.prototype.setup=function(){for(var a=this.fullName,b=[],c=0;c<this.fieldsArray.length;++c)b.push(this._fieldsArray[c].resolve().resolvedType);
this.encode=C(this)({Writer:p,types:b,util:r});this.decode=G(this)({Reader:z,types:b,util:r});this.verify=x(this)({types:b,util:r});this.fromObject=A.fromObject(this)({types:b,util:r});this.toObject=A.toObject(this)({types:b,util:r});if(a=P[a])b=Object.create(this),b.fromObject=this.fromObject,this.fromObject=a.fromObject.bind(b),b.toObject=this.toObject,this.toObject=a.toObject.bind(b);return this};a.prototype.encode=function(a,b){return this.setup().encode(a,b)};a.prototype.encodeDelimited=function(a,
b){return this.encode(a,b&&b.len?b.fork():b).ldelim()};a.prototype.decode=function(a,b){return this.setup().decode(a,b)};a.prototype.decodeDelimited=function(a){a instanceof z||(a=z.create(a));return this.decode(a,a.uint32())};a.prototype.verify=function(a){return this.setup().verify(a)};a.prototype.fromObject=function(a){return this.setup().fromObject(a)};a.prototype.toObject=function(a,b){return this.setup().toObject(a,b)};a.d=function(a){return function(b){r.decorateType(b,a)}}},{"./converter":12,
"./decoder":13,"./encoder":14,"./enum":15,"./field":16,"./mapfield":20,"./message":21,"./namespace":23,"./oneof":25,"./reader":27,"./service":33,"./util":37,"./verifier":40,"./wrappers":41,"./writer":42}],36:[function(e,m,h){function a(a,d){var f=0,c={};for(d|=0;f<a.length;)c[b[f+d]]=a[f++];return c}e=e("./util");var b="double float int32 uint32 sint32 fixed32 sfixed32 int64 uint64 sint64 fixed64 sfixed64 bool string bytes".split(" ");h.basic=a([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]);h.defaults=a([0,0,0,
0,0,0,0,0,0,0,0,0,!1,"",e.emptyArray,null]);h["long"]=a([0,0,0,1,1],7);h.mapKey=a([0,0,0,5,5,0,0,0,1,1,0,2],2);h.packed=a([1,5,0,0,0,5,5,0,0,0,1,1,0])},{"./util":37}],37:[function(e,m,h){var a=m.exports=e("./util/minimal"),b=e("./roots"),g,d;a.codegen=e("@protobufjs/codegen");a.fetch=e("@protobufjs/fetch");a.path=e("@protobufjs/path");a.fs=a.inquire("fs");a.toArray=function(a){if(a){for(var b=Object.keys(a),c=Array(b.length),d=0;d<b.length;)c[d]=a[b[d++]];return c}return[]};a.toObject=function(a){for(var b=
{},c=0;c<a.length;){var d=a[c++],f=a[c++];void 0!==f&&(b[d]=f)}return b};var f=/\\/g,c=/"/g;a.isReserved=function(a){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(a)};a.safeProp=function(b){return!/^[$\w_]+$/.test(b)||a.isReserved(b)?
'["'+b.replace(f,"\\\\").replace(c,'\\"')+'"]':"."+b};a.ucFirst=function(a){return a.charAt(0).toUpperCase()+a.substring(1)};var k=/_([a-z])/g;a.camelCase=function(a){return a.substring(0,1)+a.substring(1).replace(k,function(a,b){return b.toUpperCase()})};a.compareFieldsById=function(a,b){return a.id-b.id};a.decorateType=function(b,c){if(b.$type)return c&&b.$type.name!==c&&(a.decorateRoot.remove(b.$type),b.$type.name=c,a.decorateRoot.add(b.$type)),b.$type;g||(g=e("./type"));var d=new g(c||b.name);
a.decorateRoot.add(d);d.ctor=b;Object.defineProperty(b,"$type",{value:d,enumerable:!1});Object.defineProperty(b.prototype,"$type",{value:d,enumerable:!1});return d};var q=0;a.decorateEnum=function(b){if(b.$type)return b.$type;d||(d=e("./enum"));var c=new d("Enum"+q++,b);a.decorateRoot.add(c);Object.defineProperty(b,"$type",{value:c,enumerable:!1});return c};Object.defineProperty(a,"decorateRoot",{get:function(){return b.decorated||(b.decorated=new (e("./root")))}})},{"./enum":15,"./root":29,"./roots":30,
"./type":35,"./util/minimal":39,"@protobufjs/codegen":3,"@protobufjs/fetch":5,"@protobufjs/path":8}],38:[function(e,m,h){function a(a,b){this.lo=a>>>0;this.hi=b>>>0}m.exports=a;var b=e("../util/minimal"),g=a.zero=new a(0,0);g.toNumber=function(){return 0};g.zzEncode=g.zzDecode=function(){return this};g.length=function(){return 1};var d=a.zeroHash="\x00\x00\x00\x00\x00\x00\x00\x00";a.fromNumber=function(b){if(0===b)return g;var c=0>b;c&&(b=-b);var d=b>>>0;b=(b-d)/4294967296>>>0;c&&(b=~b>>>0,d=~d>>>
0,4294967295<++d&&(d=0,4294967295<++b&&(b=0)));return new a(d,b)};a.from=function(c){if("number"===typeof c)return a.fromNumber(c);if(b.isString(c))if(b.Long)c=b.Long.fromString(c);else return a.fromNumber(parseInt(c,10));return c.low||c.high?new a(c.low>>>0,c.high>>>0):g};a.prototype.toNumber=function(a){if(!a&&this.hi>>>31){a=~this.lo+1>>>0;var b=~this.hi>>>0;a||(b=b+1>>>0);return-(a+4294967296*b)}return this.lo+4294967296*this.hi};a.prototype.toLong=function(a){return b.Long?new b.Long(this.lo|
0,this.hi|0,!!a):{low:this.lo|0,high:this.hi|0,unsigned:!!a}};var f=String.prototype.charCodeAt;a.fromHash=function(b){return b===d?g:new a((f.call(b,0)|f.call(b,1)<<8|f.call(b,2)<<16|f.call(b,3)<<24)>>>0,(f.call(b,4)|f.call(b,5)<<8|f.call(b,6)<<16|f.call(b,7)<<24)>>>0)};a.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};a.prototype.zzEncode=function(){var a=this.hi>>31;this.hi=
((this.hi<<1|this.lo>>>31)^a)>>>0;this.lo=(this.lo<<1^a)>>>0;return this};a.prototype.zzDecode=function(){var a=-(this.lo&1);this.lo=((this.lo>>>1|this.hi<<31)^a)>>>0;this.hi=(this.hi>>>1^a)>>>0;return this};a.prototype.length=function(){var a=this.lo,b=(this.lo>>>28|this.hi<<4)>>>0,d=this.hi>>>24;return 0===d?0===b?16384>a?128>a?1:2:2097152>a?3:4:16384>b?128>b?5:6:2097152>b?7:8:128>d?9:10}},{"../util/minimal":39}],39:[function(e,m,h){(function(a){function b(a,b,c){for(var d=Object.keys(b),f=0;f<
d.length;++f)void 0!==a[d[f]]&&c||(a[d[f]]=b[d[f]]);return a}function g(a){function d(a,f){if(!(this instanceof d))return new d(a,f);Object.defineProperty(this,"message",{get:function(){return a}});Error.captureStackTrace?Error.captureStackTrace(this,d):Object.defineProperty(this,"stack",{value:Error().stack||""});f&&b(this,f)}(d.prototype=Object.create(Error.prototype)).constructor=d;Object.defineProperty(d.prototype,"name",{get:function(){return a}});d.prototype.toString=function(){return this.name+
": "+this.message};return d}h.asPromise=e("@protobufjs/aspromise");h.base64=e("@protobufjs/base64");h.EventEmitter=e("@protobufjs/eventemitter");h["float"]=e("@protobufjs/float");h.inquire=e("@protobufjs/inquire");h.utf8=e("@protobufjs/utf8");h.pool=e("@protobufjs/pool");h.LongBits=e("./longbits");h.global="undefined"!==typeof window&&window||"undefined"!==typeof a&&a||"undefined"!==typeof self&&self||this;h.emptyArray=Object.freeze?Object.freeze([]):[];h.emptyObject=Object.freeze?Object.freeze({}):
{};h.isNode=!!(h.global.process&&h.global.process.versions&&h.global.process.versions.node);h.isInteger=Number.isInteger||function(a){return"number"===typeof a&&isFinite(a)&&Math.floor(a)===a};h.isString=function(a){return"string"===typeof a||a instanceof String};h.isObject=function(a){return a&&"object"===typeof a};h.isset=h.isSet=function(a,b){var c=a[b];return null!=c&&a.hasOwnProperty(b)?"object"!==typeof c||0<(Array.isArray(c)?c.length:Object.keys(c).length):!1};h.Buffer=function(){try{var a=
h.inquire("buffer").Buffer;return a.prototype.utf8Write?a:null}catch(f){return null}}();h._Buffer_from=null;h._Buffer_allocUnsafe=null;h.newBuffer=function(a){return"number"===typeof a?h.Buffer?h._Buffer_allocUnsafe(a):new h.Array(a):h.Buffer?h._Buffer_from(a):"undefined"===typeof Uint8Array?a:new Uint8Array(a)};h.Array="undefined"!==typeof Uint8Array?Uint8Array:Array;h.Long=h.global.dcodeIO&&h.global.dcodeIO.Long||h.global.Long||h.inquire("long");h.key2Re=/^true|false|0|1$/;h.key32Re=/^-?(?:0|[1-9][0-9]*)$/;
h.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;h.longToHash=function(a){return a?h.LongBits.from(a).toHash():h.LongBits.zeroHash};h.longFromHash=function(a,b){var c=h.LongBits.fromHash(a);return h.Long?h.Long.fromBits(c.lo,c.hi,b):c.toNumber(!!b)};h.merge=b;h.lcFirst=function(a){return a.charAt(0).toLowerCase()+a.substring(1)};h.newError=g;h.ProtocolError=g("ProtocolError");h.oneOfGetter=function(a){for(var b={},c=0;c<a.length;++c)b[a[c]]=1;return function(){for(var a=Object.keys(this),c=
a.length-1;-1<c;--c)if(1===b[a[c]]&&void 0!==this[a[c]]&&null!==this[a[c]])return a[c]}};h.oneOfSetter=function(a){return function(b){for(var c=0;c<a.length;++c)a[c]!==b&&delete this[a[c]]}};h.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};h._configure=function(){var a=h.Buffer;a?(h._Buffer_from=a.from!==Uint8Array.from&&a.from||function(b,c){return new a(b,c)},h._Buffer_allocUnsafe=a.allocUnsafe||function(b){return new a(b)}):h._Buffer_from=h._Buffer_allocUnsafe=null}}).call(this,
"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./longbits":38,"@protobufjs/aspromise":1,"@protobufjs/base64":2,"@protobufjs/eventemitter":4,"@protobufjs/float":6,"@protobufjs/inquire":7,"@protobufjs/pool":9,"@protobufjs/utf8":10}],40:[function(e,m,h){function a(a,b){return a.name+": "+b+(a.repeated&&"array"!==b?"[]":a.map&&"object"!==b?"{k:"+a.keyType+"}":"")+" expected"}function b(b,c,d,e){if(c.resolvedType)if(c.resolvedType instanceof
g){b("switch(%s){",e)("default:")("return%j",a(c,"enum value"));d=Object.keys(c.resolvedType.values);for(e=0;e<d.length;++e)b("case %i:",c.resolvedType.values[d[e]]);b("break")("}")}else b("{")("var e=types[%i].verify(%s);",d,e)("if(e)")("return%j+e",c.name+".")("}");else switch(c.type){case "int32":case "uint32":case "sint32":case "fixed32":case "sfixed32":b("if(!util.isInteger(%s))",e)("return%j",a(c,"integer"));break;case "int64":case "uint64":case "sint64":case "fixed64":case "sfixed64":b("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",
e,e,e,e)("return%j",a(c,"integer|Long"));break;case "float":case "double":b('if(typeof %s!=="number")',e)("return%j",a(c,"number"));break;case "bool":b('if(typeof %s!=="boolean")',e)("return%j",a(c,"boolean"));break;case "string":b("if(!util.isString(%s))",e)("return%j",a(c,"string"));break;case "bytes":b('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',e,e,e)("return%j",a(c,"buffer"))}return b}m.exports=function(e){var c=d.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j",
"object expected"),f={};e.oneofsArray.length&&c("var p={}");for(var g=0;g<e.fieldsArray.length;++g){var l=e._fieldsArray[g].resolve(),h="m"+d.safeProp(l.name);l.optional&&c("if(%s!=null&&m.hasOwnProperty(%j)){",h,l.name);if(l.map){c("if(!util.isObject(%s))",h)("return%j",a(l,"object"))("var k=Object.keys(%s)",h)("for(var i=0;i<k.length;++i){");var m=c,r=l;switch(r.keyType){case "int32":case "uint32":case "sint32":case "fixed32":case "sfixed32":m("if(!util.key32Re.test(%s))","k[i]")("return%j",a(r,
"integer key"));break;case "int64":case "uint64":case "sint64":case "fixed64":case "sfixed64":m("if(!util.key64Re.test(%s))","k[i]")("return%j",a(r,"integer|Long key"));break;case "bool":m("if(!util.key2Re.test(%s))","k[i]")("return%j",a(r,"boolean key"))}b(c,l,g,h+"[k[i]]")("}")}else l.repeated?(c("if(!Array.isArray(%s))",h)("return%j",a(l,"array"))("for(var i=0;i<%s.length;++i){",h),b(c,l,g,h+"[i]")("}")):(l.partOf&&(m=d.safeProp(l.partOf.name),1===f[l.partOf.name]&&c("if(p%s===1)",m)("return%j",
l.partOf.name+": multiple values"),f[l.partOf.name]=1,c("p%s=1",m)),b(c,l,g,h));l.optional&&c("}")}return c("return null")};var g=e("./enum"),d=e("./util")},{"./enum":15,"./util":37}],41:[function(e,m,h){var a=e("./message");h[".google.protobuf.Any"]={fromObject:function(a){if(a&&a["@type"]){var b=this.lookup(a["@type"]);if(b){var d="."===a["@type"].charAt(0)?a["@type"].substr(1):a["@type"];return this.create({type_url:"/"+d,value:b.encode(b.fromObject(a)).finish()})}}return this.fromObject(a)},toObject:function(b,
e){if(e&&e.json&&b.type_url&&b.value){var d=b.type_url.substring(b.type_url.lastIndexOf("/")+1);(d=this.lookup(d))&&(b=d.decode(b.value))}return!(b instanceof this.ctor)&&b instanceof a?(d=b.$type.toObject(b,e),d["@type"]=b.$type.fullName,d):this.toObject(b,e)}}},{"./message":21}],42:[function(e,m,h){function a(a,b,c){this.fn=a;this.len=b;this.next=void 0;this.val=c}function b(){}function g(a){this.head=a.head;this.tail=a.tail;this.len=a.len;this.next=a.states}function d(){this.len=0;this.tail=this.head=
new a(b,0,0);this.states=null}function f(a,b,c){b[c]=a&255}function c(a,b){this.len=a;this.next=void 0;this.val=b}function k(a,b,c){for(;a.hi;)b[c++]=a.lo&127|128,a.lo=(a.lo>>>7|a.hi<<25)>>>0,a.hi>>>=7;for(;127<a.lo;)b[c++]=a.lo&127|128,a.lo>>>=7;b[c++]=a.lo}function q(a,b,c){b[c]=a&255;b[c+1]=a>>>8&255;b[c+2]=a>>>16&255;b[c+3]=a>>>24}m.exports=d;var l=e("./util/minimal"),z,p=l.LongBits,r=l.base64,C=l.utf8;d.create=l.Buffer?function(){return(d.create=function(){return new z})()}:function(){return new d};
d.alloc=function(a){return new l.Array(a)};l.Array!==Array&&(d.alloc=l.pool(d.alloc,l.Array.prototype.subarray));d.prototype._push=function(b,c,d){this.tail=this.tail.next=new a(b,c,d);this.len+=c;return this};c.prototype=Object.create(a.prototype);c.prototype.fn=function(a,b,c){for(;127<a;)b[c++]=a&127|128,a>>>=7;b[c]=a};d.prototype.uint32=function(a){this.len+=(this.tail=this.tail.next=new c(128>(a>>>=0)?1:16384>a?2:2097152>a?3:268435456>a?4:5,a)).len;return this};d.prototype.int32=function(a){return 0>
a?this._push(k,10,p.fromNumber(a)):this.uint32(a)};d.prototype.sint32=function(a){return this.uint32((a<<1^a>>31)>>>0)};d.prototype.uint64=function(a){a=p.from(a);return this._push(k,a.length(),a)};d.prototype.int64=d.prototype.uint64;d.prototype.sint64=function(a){a=p.from(a).zzEncode();return this._push(k,a.length(),a)};d.prototype.bool=function(a){return this._push(f,1,a?1:0)};d.prototype.fixed32=function(a){return this._push(q,4,a>>>0)};d.prototype.sfixed32=d.prototype.fixed32;d.prototype.fixed64=
function(a){a=p.from(a);return this._push(q,4,a.lo)._push(q,4,a.hi)};d.prototype.sfixed64=d.prototype.fixed64;d.prototype["float"]=function(a){return this._push(l["float"].writeFloatLE,4,a)};d.prototype["double"]=function(a){return this._push(l["float"].writeDoubleLE,8,a)};var G=l.Array.prototype.set?function(a,b,c){b.set(a,c)}:function(a,b,c){for(var d=0;d<a.length;++d)b[c+d]=a[d]};d.prototype.bytes=function(a){var b=a.length>>>0;if(!b)return this._push(f,1,0);if(l.isString(a)){var c=d.alloc(b=r.length(a));
r.decode(a,c,0);a=c}return this.uint32(b)._push(G,b,a)};d.prototype.string=function(a){var b=C.length(a);return b?this.uint32(b)._push(C.write,b,a):this._push(f,1,0)};d.prototype.fork=function(){this.states=new g(this);this.head=this.tail=new a(b,0,0);this.len=0;return this};d.prototype.reset=function(){this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new a(b,0,0),this.len=0);return this};d.prototype.ldelim=
function(){var a=this.head,b=this.tail,c=this.len;this.reset().uint32(c);c&&(this.tail.next=a.next,this.tail=b,this.len+=c);return this};d.prototype.finish=function(){for(var a=this.head.next,b=this.constructor.alloc(this.len),c=0;a;)a.fn(a.val,b,c),c+=a.len,a=a.next;return b};d._configure=function(a){z=a}},{"./util/minimal":39}],43:[function(e,m,h){function a(){g.call(this)}function b(a,b,c){40>a.length?d.utf8.write(a,b,c):b.utf8Write(a,c)}m.exports=a;var g=e("./writer");(a.prototype=Object.create(g.prototype)).constructor=
a;var d=e("./util/minimal"),f=d.Buffer;a.alloc=function(b){return(a.alloc=d._Buffer_allocUnsafe)(b)};var c=f&&f.prototype instanceof Uint8Array&&"set"===f.prototype.set.name?function(a,b,c){b.set(a,c)}:function(a,b,c){if(a.copy)a.copy(b,c,0,a.length);else for(var d=0;d<a.length;)b[c++]=a[d++]};a.prototype.bytes=function(a){d.isString(a)&&(a=d._Buffer_from(a,"base64"));var b=a.length>>>0;this.uint32(b);b&&this._push(c,b,a);return this};a.prototype.string=function(a){var c=f.byteLength(a);this.uint32(c);
c&&this._push(b,c,a);return this}},{"./util/minimal":39,"./writer":42}],protobufjs:[function(e,m,h){m.exports=e("./src/index")},{"./src/index":19}]},{},[]);
require=function(){function e(m,h,a){function b(d,c){if(!h[d]){if(!m[d]){var f="function"==typeof require&&require;if(!c&&f)return f(d,!0);if(g)return g(d,!0);f=Error("Cannot find module '"+d+"'");throw f.code="MODULE_NOT_FOUND",f;}f=h[d]={exports:{}};m[d][0].call(f.exports,function(a){return b(m[d][1][a]||a)},f,f.exports,e,m,h,a)}return h[d].exports}for(var g="function"==typeof require&&require,d=0;d<a.length;d++)b(a[d]);return b}return e}()({1:[function(e,m,h){function a(a){var b=a.length;if(0<
b%4)throw Error("Invalid string. Length must be a multiple of 4");a=a.indexOf("=");-1===a&&(a=b);return[a,a===b?0:4-a%4]}function b(a,b,d){for(var c=[],e=b;e<d;e+=3)b=(a[e]<<16&16711680)+(a[e+1]<<8&65280)+(a[e+2]&255),c.push(g[b>>18&63]+g[b>>12&63]+g[b>>6&63]+g[b&63]);return c.join("")}h.byteLength=function(b){b=a(b);var c=b[1];return 3*(b[0]+c)/4-c};h.toByteArray=function(b){var c=a(b);var e=c[0];c=c[1];for(var g=new f(3*(e+c)/4-c),h=0,m=0<c?e-4:e,r=0;r<m;r+=4)e=d[b.charCodeAt(r)]<<18|d[b.charCodeAt(r+
1)]<<12|d[b.charCodeAt(r+2)]<<6|d[b.charCodeAt(r+3)],g[h++]=e>>16&255,g[h++]=e>>8&255,g[h++]=e&255;2===c&&(e=d[b.charCodeAt(r)]<<2|d[b.charCodeAt(r+1)]>>4,g[h++]=e&255);1===c&&(e=d[b.charCodeAt(r)]<<10|d[b.charCodeAt(r+1)]<<4|d[b.charCodeAt(r+2)]>>2,g[h++]=e>>8&255,g[h++]=e&255);return g};h.fromByteArray=function(a){for(var c=a.length,d=c%3,e=[],f=0,h=c-d;f<h;f+=16383)e.push(b(a,f,f+16383>h?h:f+16383));1===d?(a=a[c-1],e.push(g[a>>2]+g[a<<4&63]+"==")):2===d&&(a=(a[c-2]<<8)+a[c-1],e.push(g[a>>10]+g[a>>
4&63]+g[a<<2&63]+"="));return e.join("")};var g=[],d=[],f="undefined"!==typeof Uint8Array?Uint8Array:Array;for(e=0;64>e;++e)g[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e],d["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e)]=e;d[45]=62;d[95]=63},{}],2:[function(e,m,h){h.read=function(a,b,e,d,f){var c=8*f-d-1;var g=(1<<c)-1,h=g>>1,l=-7;f=e?f-1:0;var m=e?-1:1,p=a[b+f];f+=m;e=p&(1<<-l)-1;p>>=-l;for(l+=c;0<l;e=256*e+a[b+f],f+=m,l-=8);c=e&(1<<-l)-
1;e>>=-l;for(l+=d;0<l;c=256*c+a[b+f],f+=m,l-=8);if(0===e)e=1-h;else{if(e===g)return c?NaN:Infinity*(p?-1:1);c+=Math.pow(2,d);e-=h}return(p?-1:1)*c*Math.pow(2,e-d)};h.write=function(a,b,e,d,f,c){var g,h=8*c-f-1,l=(1<<h)-1,m=l>>1,p=23===f?Math.pow(2,-24)-Math.pow(2,-77):0;c=d?0:c-1;var r=d?1:-1,C=0>b||0===b&&0>1/b?1:0;b=Math.abs(b);isNaN(b)||Infinity===b?(b=isNaN(b)?1:0,d=l):(d=Math.floor(Math.log(b)/Math.LN2),1>b*(g=Math.pow(2,-d))&&(d--,g*=2),b=1<=d+m?b+p/g:b+p*Math.pow(2,1-m),2<=b*g&&(d++,g/=2),
d+m>=l?(b=0,d=l):1<=d+m?(b=(b*g-1)*Math.pow(2,f),d+=m):(b=b*Math.pow(2,m-1)*Math.pow(2,f),d=0));for(;8<=f;a[e+c]=b&255,c+=r,b/=256,f-=8);d=d<<f|b;for(h+=f;0<h;a[e+c]=d&255,c+=r,d/=256,h-=8);a[e+c-r]|=128*C}},{}],buffer:[function(e,m,h){function a(a){if(a>O)throw new RangeError('The value "'+a+'" is invalid for option "size"');a=new Uint8Array(a);a.__proto__=b.prototype;return a}function b(a,b,c){if("number"===typeof a){if("string"===typeof b)throw new TypeError('The "string" argument must be of type string. Received type number');
return f(a)}return g(a,b,c)}function g(n,d,e){if("string"===typeof n){var t=d;if("string"!==typeof t||""===t)t="utf8";if(!b.isEncoding(t))throw new TypeError("Unknown encoding: "+t);d=l(n,t)|0;e=a(d);n=e.write(n,t);n!==d&&(e=e.slice(0,n));return e}if(ArrayBuffer.isView(n))return c(n);if(null==n)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n);if(N(n,ArrayBuffer)||n&&N(n.buffer,ArrayBuffer)){if(0>d||n.byteLength<
d)throw new RangeError('"offset" is outside of buffer bounds');if(n.byteLength<d+(e||0))throw new RangeError('"length" is outside of buffer bounds');n=void 0===d&&void 0===e?new Uint8Array(n):void 0===e?new Uint8Array(n,d):new Uint8Array(n,d,e);n.__proto__=b.prototype;return n}if("number"===typeof n)throw new TypeError('The "value" argument must not be of type number. Received type number');t=n.valueOf&&n.valueOf();if(null!=t&&t!==n)return b.from(t,d,e);if(t=k(n))return t;if("undefined"!==typeof Symbol&&
null!=Symbol.toPrimitive&&"function"===typeof n[Symbol.toPrimitive])return b.from(n[Symbol.toPrimitive]("string"),d,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n);}function d(a){if("number"!==typeof a)throw new TypeError('"size" argument must be of type number');if(0>a)throw new RangeError('The value "'+a+'" is invalid for option "size"');}function f(b){d(b);return a(0>b?0:q(b)|0)}function c(b){for(var c=
0>b.length?0:q(b.length)|0,n=a(c),d=0;d<c;d+=1)n[d]=b[d]&255;return n}function k(n){if(b.isBuffer(n)){var d=q(n.length)|0,e=a(d);if(0===e.length)return e;n.copy(e,0,0,d);return e}if(void 0!==n.length)return(d="number"!==typeof n.length)||(d=n.length,d=d!==d),d?a(0):c(n);if("Buffer"===n.type&&Array.isArray(n.data))return c(n.data)}function q(a){if(a>=O)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+O.toString(16)+" bytes");return a|0}function l(a,c){if(b.isBuffer(a))return a.length;
if(ArrayBuffer.isView(a)||N(a,ArrayBuffer))return a.byteLength;if("string"!==typeof a)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);var d=a.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===d)return 0;for(var e=!1;;)switch(c){case "ascii":case "latin1":case "binary":return d;case "utf8":case "utf-8":return v(a).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*d;case "hex":return d>>>1;case "base64":return J.toByteArray(F(a)).length;
default:if(e)return n?-1:v(a).length;c=(""+c).toLowerCase();e=!0}}function z(a,b,c){var d=!1;if(void 0===b||0>b)b=0;if(b>this.length)return"";if(void 0===c||c>this.length)c=this.length;if(0>=c)return"";c>>>=0;b>>>=0;if(c<=b)return"";for(a||(a="utf8");;)switch(a){case "hex":a=b;b=c;c=this.length;if(!a||0>a)a=0;if(!b||0>b||b>c)b=c;d="";for(c=a;c<b;++c)a=d,d=this[c],d=16>d?"0"+d.toString(16):d.toString(16),d=a+d;return d;case "utf8":case "utf-8":return G(this,b,c);case "ascii":a="";for(c=Math.min(this.length,
c);b<c;++b)a+=String.fromCharCode(this[b]&127);return a;case "latin1":case "binary":a="";for(c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(this[b]);return a;case "base64":return b=0===b&&c===this.length?J.fromByteArray(this):J.fromByteArray(this.slice(b,c)),b;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=this.slice(b,c);c="";for(a=0;a<b.length;a+=2)c+=String.fromCharCode(b[a]+256*b[a+1]);return c;default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase();
d=!0}}function p(a,b,c){var d=a[b];a[b]=a[c];a[c]=d}function r(a,c,d,e,f){if(0===a.length)return-1;"string"===typeof d?(e=d,d=0):2147483647<d?d=2147483647:-2147483648>d&&(d=-2147483648);d=+d;d!==d&&(d=f?0:a.length-1);0>d&&(d=a.length+d);if(d>=a.length){if(f)return-1;d=a.length-1}else if(0>d)if(f)d=0;else return-1;"string"===typeof c&&(c=b.from(c,e));if(b.isBuffer(c))return 0===c.length?-1:C(a,c,d,e,f);if("number"===typeof c)return c&=255,"function"===typeof Uint8Array.prototype.indexOf?f?Uint8Array.prototype.indexOf.call(a,
c,d):Uint8Array.prototype.lastIndexOf.call(a,c,d):C(a,[c],d,e,f);throw new TypeError("val must be string, number or Buffer");}function C(a,b,c,d,e){function n(a,b){return 1===f?a[b]:a.readUInt16BE(b*f)}var f=1,t=a.length,g=b.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>a.length||2>b.length)return-1;f=2;t/=2;g/=2;c/=2}if(e)for(d=-1;c<t;c++)if(n(a,c)===n(b,-1===d?0:c-d)){if(-1===d&&(d=c),c-d+1===g)return d*f}else-1!==d&&(c-=c-d),d=-1;
else for(c+g>t&&(c=t-g);0<=c;c--){t=!0;for(d=0;d<g;d++)if(n(a,c+d)!==n(b,d)){t=!1;break}if(t)return c}return-1}function G(a,b,c){c=Math.min(a.length,c);for(var d=[];b<c;){var n=a[b],e=null,f=239<n?4:223<n?3:191<n?2:1;if(b+f<=c)switch(f){case 1:128>n&&(e=n);break;case 2:var t=a[b+1];128===(t&192)&&(n=(n&31)<<6|t&63,127<n&&(e=n));break;case 3:t=a[b+1];var g=a[b+2];128===(t&192)&&128===(g&192)&&(n=(n&15)<<12|(t&63)<<6|g&63,2047<n&&(55296>n||57343<n)&&(e=n));break;case 4:t=a[b+1];g=a[b+2];var h=a[b+3];
128===(t&192)&&128===(g&192)&&128===(h&192)&&(n=(n&15)<<18|(t&63)<<12|(g&63)<<6|h&63,65535<n&&1114112>n&&(e=n))}null===e?(e=65533,f=1):65535<e&&(e-=65536,d.push(e>>>10&1023|55296),e=56320|e&1023);d.push(e);b+=f}a=d.length;if(a<=H)d=String.fromCharCode.apply(String,d);else{c="";for(b=0;b<a;)c+=String.fromCharCode.apply(String,d.slice(b,b+=H));d=c}return d}function x(a,b,c){if(0!==a%1||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length");
}function A(a,c,d,e,f,g){if(!b.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>f||c<g)throw new RangeError('"value" argument is out of bounds');if(d+e>a.length)throw new RangeError("Index out of range");}function P(a,b,c,d,e,f){if(c+d>a.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("Index out of range");}function R(a,b,c,d,e){b=+b;c>>>=0;e||P(a,b,c,4,3.4028234663852886E38,-3.4028234663852886E38);u.write(a,b,c,d,23,4);return c+4}function Q(a,
b,c,d,e){b=+b;c>>>=0;e||P(a,b,c,8,1.7976931348623157E308,-1.7976931348623157E308);u.write(a,b,c,d,52,8);return c+8}function F(a){a=a.split("=")[0];a=a.trim().replace(I,"");if(2>a.length)return"";for(;0!==a.length%4;)a+="=";return a}function v(a,b){b=b||Infinity;for(var c,d=a.length,e=null,n=[],f=0;f<d;++f){c=a.charCodeAt(f);if(55295<c&&57344>c){if(!e){if(56319<c){-1<(b-=3)&&n.push(239,191,189);continue}else if(f+1===d){-1<(b-=3)&&n.push(239,191,189);continue}e=c;continue}if(56320>c){-1<(b-=3)&&n.push(239,
191,189);e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&-1<(b-=3)&&n.push(239,191,189);e=null;if(128>c){if(0>--b)break;n.push(c)}else if(2048>c){if(0>(b-=2))break;n.push(c>>6|192,c&63|128)}else if(65536>c){if(0>(b-=3))break;n.push(c>>12|224,c>>6&63|128,c&63|128)}else if(1114112>c){if(0>(b-=4))break;n.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw Error("Invalid code point");}return n}function D(a){for(var b=[],c=0;c<a.length;++c)b.push(a.charCodeAt(c)&255);return b}function B(a,
b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function N(a,b){return a instanceof b||null!=a&&null!=a.constructor&&null!=a.constructor.name&&a.constructor.name===b.name}var J=e("base64-js"),u=e("ieee754");h.Buffer=b;h.SlowBuffer=function(a){+a!=a&&(a=0);return b.alloc(+a)};h.INSPECT_MAX_BYTES=50;var O=2147483647;h.kMaxLength=O;b.TYPED_ARRAY_SUPPORT=function(){try{var a=new Uint8Array(1);a.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===
a.foo()}catch(t){return!1}}();b.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}});Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}});
"undefined"!==typeof Symbol&&null!=Symbol.species&&b[Symbol.species]===b&&Object.defineProperty(b,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1});b.poolSize=8192;b.from=function(a,b,c){return g(a,b,c)};b.prototype.__proto__=Uint8Array.prototype;b.__proto__=Uint8Array;b.alloc=function(b,c,e){d(b);b=0>=b?a(b):void 0!==c?"string"===typeof e?a(b).fill(c,e):a(b).fill(c):a(b);return b};b.allocUnsafe=function(a){return f(a)};b.allocUnsafeSlow=function(a){return f(a)};b.isBuffer=function(a){return null!=
a&&!0===a._isBuffer&&a!==b.prototype};b.compare=function(a,c){N(a,Uint8Array)&&(a=b.from(a,a.offset,a.byteLength));N(c,Uint8Array)&&(c=b.from(c,c.offset,c.byteLength));if(!b.isBuffer(a)||!b.isBuffer(c))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===c)return 0;for(var d=a.length,e=c.length,n=0,f=Math.min(d,e);n<f;++n)if(a[n]!==c[n]){d=a[n];e=c[n];break}return d<e?-1:e<d?1:0};b.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};b.concat=function(a,c){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return b.alloc(0);var d;if(void 0===c)for(d=c=0;d<a.length;++d)c+=a[d].length;var e=b.allocUnsafe(c),n=0;for(d=0;d<a.length;++d){var f=a[d];N(f,Uint8Array)&&(f=b.from(f));if(!b.isBuffer(f))throw new TypeError('"list" argument must be an Array of Buffers');f.copy(e,n);n+=f.length}return e};b.byteLength=l;b.prototype._isBuffer=!0;b.prototype.swap16=function(){var a=
this.length;if(0!==a%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;b<a;b+=2)p(this,b,b+1);return this};b.prototype.swap32=function(){var a=this.length;if(0!==a%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<a;b+=4)p(this,b,b+3),p(this,b+1,b+2);return this};b.prototype.swap64=function(){var a=this.length;if(0!==a%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<a;b+=8)p(this,b,b+7),p(this,b+1,b+6),
p(this,b+2,b+5),p(this,b+3,b+4);return this};b.prototype.toString=function(){var a=this.length;return 0===a?"":0===arguments.length?G(this,0,a):z.apply(this,arguments)};b.prototype.toLocaleString=b.prototype.toString;b.prototype.equals=function(a){if(!b.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===b.compare(this,a)};b.prototype.inspect=function(){var a=h.INSPECT_MAX_BYTES;var b=this.toString("hex",0,a).replace(/(.{2})/g,"$1 ").trim();this.length>a&&(b+=" ... ");
return"<Buffer "+b+">"};b.prototype.compare=function(a,c,d,e,f){N(a,Uint8Array)&&(a=b.from(a,a.offset,a.byteLength));if(!b.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);void 0===c&&(c=0);void 0===d&&(d=a?a.length:0);void 0===e&&(e=0);void 0===f&&(f=this.length);if(0>c||d>a.length||0>e||f>this.length)throw new RangeError("out of range index");if(e>=f&&c>=d)return 0;if(e>=f)return-1;if(c>=d)return 1;c>>>=0;d>>>=0;e>>>=0;f>>>=
0;if(this===a)return 0;var n=f-e,g=d-c,t=Math.min(n,g);e=this.slice(e,f);a=a.slice(c,d);for(c=0;c<t;++c)if(e[c]!==a[c]){n=e[c];g=a[c];break}return n<g?-1:g<n?1:0};b.prototype.includes=function(a,b,c){return-1!==this.indexOf(a,b,c)};b.prototype.indexOf=function(a,b,c){return r(this,a,b,c,!0)};b.prototype.lastIndexOf=function(a,b,c){return r(this,a,b,c,!1)};b.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"===typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b>>>=
0,isFinite(c)?(c>>>=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var e=this.length-b;if(void 0===c||c>e)c=e;if(0<a.length&&(0>c||0>b)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(e=!1;;)switch(d){case "hex":a:{b=Number(b)||0;d=this.length-b;c?(c=Number(c),c>d&&(c=d)):c=d;d=a.length;c>d/2&&(c=d/2);for(d=0;d<c;++d){e=parseInt(a.substr(2*d,2),16);if(e!==e){a=d;break a}this[b+
d]=e}a=d}return a;case "utf8":case "utf-8":return B(v(a,this.length-b),this,b,c);case "ascii":return B(D(a),this,b,c);case "latin1":case "binary":return B(D(a),this,b,c);case "base64":return B(J.toByteArray(F(a)),this,b,c);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=a;e=this.length-b;for(var f=[],n=0;n<d.length&&!(0>(e-=2));++n){var g=d.charCodeAt(n);a=g>>8;g%=256;f.push(g);f.push(a)}return B(f,this,b,c);default:if(e)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();
e=!0}};b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var H=4096;b.prototype.slice=function(a,c){var d=this.length;a=~~a;c=void 0===c?d:~~c;0>a?(a+=d,0>a&&(a=0)):a>d&&(a=d);0>c?(c+=d,0>c&&(c=0)):c>d&&(c=d);c<a&&(c=a);d=this.subarray(a,c);d.__proto__=b.prototype;return d};b.prototype.readUIntLE=function(a,b,c){a>>>=0;b>>>=0;c||x(a,b,this.length);c=this[a];for(var d=1,e=0;++e<b&&(d*=256);)c+=this[a+e]*d;return c};b.prototype.readUIntBE=function(a,
b,c){a>>>=0;b>>>=0;c||x(a,b,this.length);c=this[a+--b];for(var d=1;0<b&&(d*=256);)c+=this[a+--b]*d;return c};b.prototype.readUInt8=function(a,b){a>>>=0;b||x(a,1,this.length);return this[a]};b.prototype.readUInt16LE=function(a,b){a>>>=0;b||x(a,2,this.length);return this[a]|this[a+1]<<8};b.prototype.readUInt16BE=function(a,b){a>>>=0;b||x(a,2,this.length);return this[a]<<8|this[a+1]};b.prototype.readUInt32LE=function(a,b){a>>>=0;b||x(a,4,this.length);return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*
this[a+3]};b.prototype.readUInt32BE=function(a,b){a>>>=0;b||x(a,4,this.length);return 16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])};b.prototype.readIntLE=function(a,b,c){a>>>=0;b>>>=0;c||x(a,b,this.length);c=this[a];for(var d=1,e=0;++e<b&&(d*=256);)c+=this[a+e]*d;c>=128*d&&(c-=Math.pow(2,8*b));return c};b.prototype.readIntBE=function(a,b,c){a>>>=0;b>>>=0;c||x(a,b,this.length);c=b;for(var d=1,e=this[a+--c];0<c&&(d*=256);)e+=this[a+--c]*d;e>=128*d&&(e-=Math.pow(2,8*b));return e};b.prototype.readInt8=
function(a,b){a>>>=0;b||x(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):this[a]};b.prototype.readInt16LE=function(a,b){a>>>=0;b||x(a,2,this.length);var c=this[a]|this[a+1]<<8;return c&32768?c|4294901760:c};b.prototype.readInt16BE=function(a,b){a>>>=0;b||x(a,2,this.length);var c=this[a+1]|this[a]<<8;return c&32768?c|4294901760:c};b.prototype.readInt32LE=function(a,b){a>>>=0;b||x(a,4,this.length);return this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24};b.prototype.readInt32BE=function(a,b){a>>>=
0;b||x(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};b.prototype.readFloatLE=function(a,b){a>>>=0;b||x(a,4,this.length);return u.read(this,a,!0,23,4)};b.prototype.readFloatBE=function(a,b){a>>>=0;b||x(a,4,this.length);return u.read(this,a,!1,23,4)};b.prototype.readDoubleLE=function(a,b){a>>>=0;b||x(a,8,this.length);return u.read(this,a,!0,52,8)};b.prototype.readDoubleBE=function(a,b){a>>>=0;b||x(a,8,this.length);return u.read(this,a,!1,52,8)};b.prototype.writeUIntLE=function(a,
b,c,d){a=+a;b>>>=0;c>>>=0;d||A(this,a,b,c,Math.pow(2,8*c)-1,0);d=1;var e=0;for(this[b]=a&255;++e<c&&(d*=256);)this[b+e]=a/d&255;return b+c};b.prototype.writeUIntBE=function(a,b,c,d){a=+a;b>>>=0;c>>>=0;d||A(this,a,b,c,Math.pow(2,8*c)-1,0);d=c-1;var e=1;for(this[b+d]=a&255;0<=--d&&(e*=256);)this[b+d]=a/e&255;return b+c};b.prototype.writeUInt8=function(a,b,c){a=+a;b>>>=0;c||A(this,a,b,1,255,0);this[b]=a&255;return b+1};b.prototype.writeUInt16LE=function(a,b,c){a=+a;b>>>=0;c||A(this,a,b,2,65535,0);this[b]=
a&255;this[b+1]=a>>>8;return b+2};b.prototype.writeUInt16BE=function(a,b,c){a=+a;b>>>=0;c||A(this,a,b,2,65535,0);this[b]=a>>>8;this[b+1]=a&255;return b+2};b.prototype.writeUInt32LE=function(a,b,c){a=+a;b>>>=0;c||A(this,a,b,4,4294967295,0);this[b+3]=a>>>24;this[b+2]=a>>>16;this[b+1]=a>>>8;this[b]=a&255;return b+4};b.prototype.writeUInt32BE=function(a,b,c){a=+a;b>>>=0;c||A(this,a,b,4,4294967295,0);this[b]=a>>>24;this[b+1]=a>>>16;this[b+2]=a>>>8;this[b+3]=a&255;return b+4};b.prototype.writeIntLE=function(a,
b,c,d){a=+a;b>>>=0;d||(d=Math.pow(2,8*c-1),A(this,a,b,c,d-1,-d));d=0;var e=1,f=0;for(this[b]=a&255;++d<c&&(e*=256);)0>a&&0===f&&0!==this[b+d-1]&&(f=1),this[b+d]=(a/e>>0)-f&255;return b+c};b.prototype.writeIntBE=function(a,b,c,d){a=+a;b>>>=0;d||(d=Math.pow(2,8*c-1),A(this,a,b,c,d-1,-d));d=c-1;var e=1,f=0;for(this[b+d]=a&255;0<=--d&&(e*=256);)0>a&&0===f&&0!==this[b+d+1]&&(f=1),this[b+d]=(a/e>>0)-f&255;return b+c};b.prototype.writeInt8=function(a,b,c){a=+a;b>>>=0;c||A(this,a,b,1,127,-128);0>a&&(a=255+
a+1);this[b]=a&255;return b+1};b.prototype.writeInt16LE=function(a,b,c){a=+a;b>>>=0;c||A(this,a,b,2,32767,-32768);this[b]=a&255;this[b+1]=a>>>8;return b+2};b.prototype.writeInt16BE=function(a,b,c){a=+a;b>>>=0;c||A(this,a,b,2,32767,-32768);this[b]=a>>>8;this[b+1]=a&255;return b+2};b.prototype.writeInt32LE=function(a,b,c){a=+a;b>>>=0;c||A(this,a,b,4,2147483647,-2147483648);this[b]=a&255;this[b+1]=a>>>8;this[b+2]=a>>>16;this[b+3]=a>>>24;return b+4};b.prototype.writeInt32BE=function(a,b,c){a=+a;b>>>=
0;c||A(this,a,b,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);this[b]=a>>>24;this[b+1]=a>>>16;this[b+2]=a>>>8;this[b+3]=a&255;return b+4};b.prototype.writeFloatLE=function(a,b,c){return R(this,a,b,!0,c)};b.prototype.writeFloatBE=function(a,b,c){return R(this,a,b,!1,c)};b.prototype.writeDoubleLE=function(a,b,c){return Q(this,a,b,!0,c)};b.prototype.writeDoubleBE=function(a,b,c){return Q(this,a,b,!1,c)};b.prototype.copy=function(a,c,d,e){if(!b.isBuffer(a))throw new TypeError("argument should be a Buffer");
d||(d=0);e||0===e||(e=this.length);c>=a.length&&(c=a.length);c||(c=0);0<e&&e<d&&(e=d);if(e===d||0===a.length||0===this.length)return 0;if(0>c)throw new RangeError("targetStart out of bounds");if(0>d||d>=this.length)throw new RangeError("Index out of range");if(0>e)throw new RangeError("sourceEnd out of bounds");e>this.length&&(e=this.length);a.length-c<e-d&&(e=a.length-c+d);var f=e-d;if(this===a&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(c,d,e);else if(this===a&&d<c&&c<e)for(e=
f-1;0<=e;--e)a[e+c]=this[e+d];else Uint8Array.prototype.set.call(a,this.subarray(d,e),c);return f};b.prototype.fill=function(a,c,d,e){if("string"===typeof a){"string"===typeof c?(e=c,c=0,d=this.length):"string"===typeof d&&(e=d,d=this.length);if(void 0!==e&&"string"!==typeof e)throw new TypeError("encoding must be a string");if("string"===typeof e&&!b.isEncoding(e))throw new TypeError("Unknown encoding: "+e);if(1===a.length){var f=a.charCodeAt(0);if("utf8"===e&&128>f||"latin1"===e)a=f}}else"number"===
typeof a&&(a&=255);if(0>c||this.length<c||this.length<d)throw new RangeError("Out of range index");if(d<=c)return this;c>>>=0;d=void 0===d?this.length:d>>>0;a||(a=0);if("number"===typeof a)for(e=c;e<d;++e)this[e]=a;else{f=b.isBuffer(a)?a:b.from(a,e);var g=f.length;if(0===g)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(e=0;e<d-c;++e)this[e+c]=f[e%g]}return this};var I=/[^+/0-9A-Za-z-_]/g},{"base64-js":1,ieee754:2}]},{},[]);
var protobuf = require("protobufjs");
var buffer = require("buffer")

//polygon-clipping
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).polygonClipping=e()}(this,function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}var r=function e(n,r){t(this,e),this.next=null,this.key=n,this.data=r,this.left=null,this.right=null};function i(t,e){return t>e?1:t<e?-1:0}function o(t,e,n){for(var i=new r(null,null),o=i,s=i;;){var u=n(t,e.key);if(u<0){if(null===e.left)break;if(n(t,e.left.key)<0){var l=e.left;if(e.left=l.right,l.right=e,null===(e=l).left)break}s.left=e,s=e,e=e.left}else{if(!(u>0))break;if(null===e.right)break;if(n(t,e.right.key)>0){var h=e.right;if(e.right=h.left,h.left=e,null===(e=h).right)break}o.right=e,o=e,e=e.right}}return o.right=e.left,s.left=e.right,e.left=i.right,e.right=i.left,e}function s(t,e,n,i){var s=new r(t,e);if(null===n)return s.left=s.right=null,s;var u=i(t,(n=o(t,n,i)).key);return u<0?(s.left=n.left,s.right=n,n.left=null):u>=0&&(s.right=n.right,s.left=n,n.right=null),s}function u(t,e,n){var r=null,i=null;if(e){var s=n((e=o(t,e,n)).key,t);0===s?(r=e.left,i=e.right):s<0?(i=e.right,e.right=null,r=e):(r=e.left,e.left=null,i=e)}return{left:r,right:i}}var l=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;t(this,e),this._root=null,this._size=0,this._comparator=n}return n(e,[{key:"insert",value:function(t,e){return this._size++,this._root=s(t,e,this._root,this._comparator)}},{key:"add",value:function(t,e){var n=new r(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var i=this._comparator,s=o(t,this._root,i),u=i(t,s.key);return 0===u?this._root=s:(u<0?(n.left=s.left,n.right=s,s.left=null):u>0&&(n.right=s.right,n.left=s,s.right=null),this._size++,this._root=n),this._root}},{key:"remove",value:function(t){this._root=this._remove(t,this._root,this._comparator)}},{key:"_remove",value:function(t,e,n){var r;return null===e?null:0===n(t,(e=o(t,e,n)).key)?(null===e.left?r=e.right:(r=o(t,e.left,n)).right=e.right,this._size--,r):e}},{key:"pop",value:function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=o(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null}},{key:"findStatic",value:function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null}},{key:"find",value:function(t){return this._root&&(this._root=o(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root}},{key:"contains",value:function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1}},{key:"forEach",value:function(t,e){for(var n=this._root,r=[],i=!1;!i;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),t.call(e,n),n=n.right):i=!0;return this}},{key:"range",value:function(t,e,n,r){for(var i=[],o=this._comparator,s=this._root;0!==i.length||s;)if(s)i.push(s),s=s.left;else{if(o((s=i.pop()).key,e)>0)break;if(o(s.key,t)>=0&&n.call(r,s))return this;s=s.right}return this}},{key:"keys",value:function(){var t=[];return this.forEach(function(e){var n=e.key;return t.push(n)}),t}},{key:"values",value:function(){var t=[];return this.forEach(function(e){var n=e.data;return t.push(n)}),t}},{key:"min",value:function(){return this._root?this.minNode(this._root).key:null}},{key:"max",value:function(){return this._root?this.maxNode(this._root).key:null}},{key:"minNode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._root;if(t)for(;t.left;)t=t.left;return t}},{key:"maxNode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._root;if(t)for(;t.right;)t=t.right;return t}},{key:"at",value:function(t){for(var e=this._root,n=!1,r=0,i=[];!n;)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),r===t)return e;r++,e=e.right}else n=!0;return null}},{key:"next",value:function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?(n=e,e=e.left):e=e.right}return n}},{key:"prev",value:function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?e=e.left:(n=e,e=e.right)}return n}},{key:"clear",value:function(){return this._root=null,this._size=0,this}},{key:"toList",value:function(){return function(t){var e=t,n=[],i=!1,o=new r(null,null),s=o;for(;!i;)e?(n.push(e),e=e.left):n.length>0?e=(e=s=s.next=n.pop()).right:i=!0;return s.next=null,o.next}(this._root)}},{key:"load",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.length,o=this._comparator;if(n&&function t(e,n,r,i,o){if(r>=i)return;var s=e[r+i>>1];var u=r-1;var l=i+1;for(;;){do{u++}while(o(e[u],s)<0);do{l--}while(o(e[l],s)>0);if(u>=l)break;var h=e[u];e[u]=e[l],e[l]=h,h=n[u],n[u]=n[l],n[l]=h}t(e,n,r,l,o);t(e,n,l+1,i,o)}(t,e,0,i-1,o),null===this._root)this._root=function t(e,n,i,o){var s=o-i;if(s>0){var u=i+Math.floor(s/2),l=e[u],h=n[u],f=new r(l,h);return f.left=t(e,n,i,u),f.right=t(e,n,u+1,o),f}return null}(t,e,0,i),this._size=i;else{var s=function(t,e,n){var i=new r(null,null),o=i,s=t,u=e;for(;null!==s&&null!==u;)n(s.key,u.key)<0?(o.next=s,s=s.next):(o.next=u,u=u.next),o=o.next;null!==s?o.next=s:null!==u&&(o.next=u);return i.next}(this.toList(),function(t,e){for(var n=new r(null,null),i=n,o=0;o<t.length;o++)i=i.next=new r(t[o],e[o]);return i.next=null,n.next}(t,e),o);i=this._size+i,this._root=function t(e,n,r){var i=r-n;if(i>0){var o=n+Math.floor(i/2),s=t(e,n,o),u=e.head;return u.left=s,e.head=e.head.next,u.right=t(e,o+1,r),u}return null}({head:s},0,i)}return this}},{key:"isEmpty",value:function(){return null===this._root}},{key:"toString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return String(t.key)},e=[];return function t(e,n,r,i,o){if(e){i("".concat(n).concat(r?"└── ":"├── ").concat(o(e),"\n"));var s=n+(r?"    ":"│   ");e.left&&t(e.left,s,!1,i,o),e.right&&t(e.right,s,!0,i,o)}}(this._root,"",!0,function(t){return e.push(t)},t),e.join("")}},{key:"update",value:function(t,e,n){var r=this._comparator,i=u(t,this._root,r),l=i.left,h=i.right;r(t,e)<0?h=s(e,n,h,r):l=s(e,n,l,r),this._root=function(t,e,n){return null===e?t:null===t?e:((e=o(t.key,e,n)).left=t,e)}(l,h,r)}},{key:"split",value:function(t){return u(t,this._root,this._comparator)}},{key:"size",get:function(){return this._size}},{key:"root",get:function(){return this._root}}]),e}();var h=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},f=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:r,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},a=Number.EPSILON;void 0===a&&(a=Math.pow(2,-52));var v=a*a,y=function(t,e){if(-a<t&&t<a&&-a<e&&e<a)return 0;var n=t-e;return n*n<v*t*e?0:t<e?-1:1},g=function(){function e(){t(this,e),this.reset()}return n(e,[{key:"reset",value:function(){this.xRounder=new c,this.yRounder=new c}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),e}(),c=function(){function e(){t(this,e),this.tree=new l,this.round(0)}return n(e,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===y(e.key,n.key))return this.tree.remove(t),n.key;var r=this.tree.next(e);return null!==r&&0===y(e.key,r.key)?(this.tree.remove(t),r.key):t}}]),e}(),p=new g,x=function(t,e){return t.x*e.y-t.y*e.x},b=function(t,e){return t.x*e.x+t.y*e.y},m=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y},o=x(r,i);return y(o,0)},d=function(t){return Math.sqrt(b(t,t))},E=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return b(i,r)/d(i)/d(r)},k=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},S=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},_=function(){function e(n,r){t(this,e),void 0===n.events?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=r}return n(e,null,[{key:"compare",value:function(t,n){var r=e.comparePoints(t.point,n.point);return 0!==r?r:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:R.compare(t.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),n(e,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,r=e.length;n<r;n++){var i=e[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var r=e+1;r<t;r++){var i=this.point.events[r];void 0===i.consumedBy&&(n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment))}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,r=function(r){var i,o,s,u,l,h=r.otherSE;n.set(r,{sine:(i=e.point,o=t.point,s=h.point,u={x:o.x-i.x,y:o.y-i.y},l={x:s.x-i.x,y:s.y-i.y},x(l,u)/d(l)/d(u)),cosine:E(e.point,t.point,h.point)})};return function(t,e){n.has(t)||r(t),n.has(e)||r(e);var i=n.get(t),o=i.sine,s=i.cosine,u=n.get(e),l=u.sine,h=u.cosine;return o>=0&&l>=0?s<h?1:s>h?-1:0:o<0&&l<0?s<h?-1:s>h?1:0:l<o?-1:l>o?1:0}}}]),e}(),w=0,R=function(){function e(n,r,i,o){t(this,e),this.id=++w,this.leftSE=n,n.segment=this,n.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=n,this.rings=i,this.windings=o}return n(e,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,r=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(i<r)return-1;var s=t.leftSE.point.y,u=e.leftSE.point.y,l=t.rightSE.point.y,h=e.rightSE.point.y;if(n<r){if(u<s&&u<l)return 1;if(u>s&&u>l)return-1;var f=t.comparePoint(e.leftSE.point);if(f<0)return 1;if(f>0)return-1;var a=e.comparePoint(t.rightSE.point);return 0!==a?a:-1}if(n>r){if(s<u&&s<h)return-1;if(s>u&&s>h)return 1;var v=e.comparePoint(t.leftSE.point);if(0!==v)return v;var y=t.comparePoint(e.rightSE.point);return y<0?1:y>0?-1:1}if(s<u)return-1;if(s>u)return 1;if(i<o){var g=e.comparePoint(t.rightSE.point);if(0!==g)return g}if(i>o){var c=t.comparePoint(e.rightSE.point);if(c<0)return 1;if(c>0)return-1}if(i!==o){var p=l-s,x=i-n,b=h-u,m=o-r;if(p>x&&b<m)return 1;if(p<x&&b>m)return-1}return i>o?1:i<o?-1:l<h?-1:l>h?1:t.id<e.id?-1:t.id>e.id?1:0}}]),n(e,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var i=(t.y-e.y)/r.y,o=e.x+i*r.x;if(t.x===o)return 0;var s=(t.x-e.x)/r.x,u=e.y+s*r.y;return t.y===u?0:t.y<u?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),r=f(e,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,u=t.rightSE.point,l=h(e,s)&&0===this.comparePoint(s),a=h(n,i)&&0===t.comparePoint(i),v=h(e,u)&&0===this.comparePoint(u),y=h(n,o)&&0===t.comparePoint(o);if(a&&l)return y&&!v?o:!y&&v?u:null;if(a)return v&&i.x===u.x&&i.y===u.y?null:i;if(l)return y&&o.x===s.x&&o.y===s.y?null:s;if(y&&v)return null;if(y)return o;if(v)return u;var g=function(t,e,n,r){if(0===e.x)return S(n,r,t.x);if(0===r.x)return S(t,e,n.x);if(0===e.y)return k(n,r,t.y);if(0===r.y)return k(t,e,n.y);var i=x(e,r);if(0==i)return null;var o={x:n.x-t.x,y:n.y-t.y},s=x(o,e)/i,u=x(o,r)/i;return{x:(t.x+u*e.x+(n.x+s*r.x))/2,y:(t.y+u*e.y+(n.y+s*r.y))/2}}(i,this.vector(),s,t.vector());return null===g?null:h(r,g)?p.round(g.x,g.y):null}},{key:"split",value:function(t){var n=[],r=void 0!==t.events,i=new _(t,!0),o=new _(t,!1),s=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var u=new e(i,s,this.rings.slice(),this.windings.slice());return _.comparePoints(u.leftSE.point,u.rightSE.point)>0&&u.swapEvents(),_.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(t){for(var n=this,r=t;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=e.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var s=n;n=r,r=s}for(var u=0,l=r.rings.length;u<l;u++){var h=r.rings[u],f=r.windings[u],a=n.rings.indexOf(h);-1===a?(n.rings.push(h),n.windings.push(f)):n.windings[a]+=f}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var s=this.rings[i],u=this.windings[i],l=e.indexOf(s);-1===l?(e.push(s),n.push(u)):n[l]+=u}for(var h=[],f=[],a=0,v=e.length;a<v;a++)if(0!==n[a]){var y=e[a],g=y.poly;if(-1===f.indexOf(g))if(y.isExterior)h.push(g);else{-1===f.indexOf(g)&&f.push(g);var c=h.indexOf(y.poly);-1!==c&&h.splice(c,1)}}for(var p=0,x=h.length;p<x;p++){var b=h[p].multiPoly;-1===r.indexOf(b)&&r.push(b)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(z.type){case"union":var n=0===t.length,r=0===e.length;this._isInResult=n!==r;break;case"intersection":var i,o;t.length<e.length?(i=t.length,o=e.length):(i=e.length,o=t.length),this._isInResult=o===z.numMultiPolys&&i<o;break;case"xor":var s=Math.abs(t.length-e.length);this._isInResult=s%2==1;break;case"difference":var u=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=u(t)!==u(e);break;default:throw new Error("Unrecognized operation type found ".concat(z.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,n,r){var i,o,s,u=_.comparePoints(t,n);if(u<0)i=t,o=n,s=1;else{if(!(u>0))throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));i=n,o=t,s=-1}return new e(new _(i,!0),new _(o,!1),[r],[s])}}]),e}(),I=function(){function e(n,r,i){if(t(this,e),!Array.isArray(n)||0===n.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=i,this.segments=[],"number"!=typeof n[0][0]||"number"!=typeof n[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=p.round(n[0][0],n[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var s=o,u=1,l=n.length;u<l;u++){if("number"!=typeof n[u][0]||"number"!=typeof n[u][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var h=p.round(n[u][0],n[u][1]);h.x===s.x&&h.y===s.y||(this.segments.push(R.fromRing(s,h,this)),h.x<this.bbox.ll.x&&(this.bbox.ll.x=h.x),h.y<this.bbox.ll.y&&(this.bbox.ll.y=h.y),h.x>this.bbox.ur.x&&(this.bbox.ur.x=h.x),h.y>this.bbox.ur.y&&(this.bbox.ur.y=h.y),s=h)}o.x===s.x&&o.y===s.y||this.segments.push(R.fromRing(s,o,this))}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}]),e}(),P=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new I(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,o=n.length;i<o;i++){var s=new I(n[i],this,!1);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.interiorRings.push(s)}this.multiPoly=r}return n(e,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var r=this.interiorRings[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),e}(),A=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof n[0][0][0]&&(n=[n])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,o=n.length;i<o;i++){var s=new P(n[i],this);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.polys.push(s)}this.isSubject=r}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var r=this.polys[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),e}(),N=function(){function e(n){t(this,e),this.events=n;for(var r=0,i=n.length;r<i;r++)n[r].segment.ringOut=this;this.poly=null}return n(e,null,[{key:"factory",value:function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];if(o.isInResult()&&!o.ringOut){for(var s=null,u=o.leftSE,l=o.rightSE,h=[u],f=u.point,a=[];s=u,u=l,h.push(u),u.point!==f;)for(;;){var v=u.getAvailableLinkedEvents();if(0===v.length){var y=h[0].point,g=h[h.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(y.x,",")+" ".concat(y.y,"]. Last matching segment found ends at")+" [".concat(g.x,", ").concat(g.y,"]."))}if(1===v.length){l=v[0].otherSE;break}for(var c=null,p=0,x=a.length;p<x;p++)if(a[p].point===u.point){c=p;break}if(null===c){a.push({index:h.length,point:u.point});var b=u.getLeftmostComparator(s);l=v.sort(b)[0].otherSE;break}var m=a.splice(c)[0],d=h.splice(m.index);d.unshift(d[0].otherSE),n.push(new e(d.reverse()))}n.push(new e(h))}}return n}}]),n(e,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==m(i,t,o)&&(e.push(i),t=i)}if(1===e.length)return null;var s=e[0],u=e[1];0===m(s,t,u)&&e.shift(),e.push(e[0]);for(var l=this.isExteriorRing()?1:-1,h=this.isExteriorRing()?0:e.length-1,f=this.isExteriorRing()?e.length:-1,a=[],v=h;v!=f;v+=l)a.push([e[v].x,e[v].y]);return a}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var r=this.events[e];_.compare(t,r)>0&&(t=r)}for(var i=t.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),e}(),O=function(){function e(n){t(this,e),this.exteriorRing=n,n.poly=this,this.interiorRings=[]}return n(e,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var r=this.interiorRings[e].getGeom();null!==r&&t.push(r)}return t}}]),e}(),L=function(){function e(n){t(this,e),this.rings=n,this.polys=this._composePolys(n)}return n(e,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(!i.poly)if(i.isExteriorRing())e.push(new O(i));else{var o=i.enclosingRing();o.poly||e.push(new O(o)),o.poly.addInterior(i)}}return e}}]),e}(),B=function(){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R.compare;t(this,e),this.queue=n,this.tree=new l(r),this.segments=[]}return n(e,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var r=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!r)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=r,o=r,s=void 0,u=void 0;void 0===s;)null===(i=this.tree.prev(i))?s=null:void 0===i.key.consumedBy&&(s=i.key);for(;void 0===u;)null===(o=this.tree.next(o))?u=null:void 0===o.key.consumedBy&&(u=o.key);if(t.isLeft){var l=null;if(s){var h=s.getIntersection(e);if(null!==h&&(e.isAnEndpoint(h)||(l=h),!s.isAnEndpoint(h)))for(var f=this._splitSafely(s,h),a=0,v=f.length;a<v;a++)n.push(f[a])}var y=null;if(u){var g=u.getIntersection(e);if(null!==g&&(e.isAnEndpoint(g)||(y=g),!u.isAnEndpoint(g)))for(var c=this._splitSafely(u,g),p=0,x=c.length;p<x;p++)n.push(c[p])}if(null!==l||null!==y){var b=null;if(null===l)b=y;else if(null===y)b=l;else{b=_.comparePoints(l,y)<=0?l:y}this.queue.remove(e.rightSE),n.push(e.rightSE);for(var m=e.split(b),d=0,E=m.length;d<E;d++)n.push(m[d])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=s)}else{if(s&&u){var k=s.getIntersection(u);if(null!==k){if(!s.isAnEndpoint(k))for(var S=this._splitSafely(s,k),w=0,R=S.length;w<R;w++)n.push(S[w]);if(!u.isAnEndpoint(k))for(var I=this._splitSafely(u,k),P=0,A=I.length;P<A;P++)n.push(I[P])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.insert(t),r}}]),e}(),z=new(function(){function e(){t(this,e)}return n(e,[{key:"run",value:function(t,e,n){z.type=t,p.reset();for(var r=[new A(e,!0)],i=0,o=n.length;i<o;i++)r.push(new A(n[i],!1));if(z.numMultiPolys=r.length,"difference"===z.type)for(var s=r[0],u=1;u<r.length;)null!==f(r[u].bbox,s.bbox)?u++:r.splice(u,1);if("intersection"===z.type)for(var h=0,a=r.length;h<a;h++)for(var v=r[h],y=h+1,g=r.length;y<g;y++)if(null===f(v.bbox,r[y].bbox))return[];for(var c=new l(_.compare),x=0,b=r.length;x<b;x++)for(var m=r[x].getSweepEvents(),d=0,E=m.length;d<E;d++)c.insert(m[d]);for(var k=new B(c),S=c.size,w=c.pop();w;){var R=w.key;if(c.size===S){var I=R.segment;throw new Error("Unable to pop() ".concat(R.isLeft?"left":"right"," SweepEvent ")+"[".concat(R.point.x,", ").concat(R.point.y,"] from segment #").concat(I.id," ")+"[".concat(I.leftSE.point.x,", ").concat(I.leftSE.point.y,"] -> ")+"[".concat(I.rightSE.point.x,", ").concat(I.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}for(var P=k.process(R),O=0,M=P.length;O<M;O++){var T=P[O];void 0===T.consumedBy&&c.insert(T)}S=c.size,w=c.pop()}p.reset();var G=N.factory(k.segments);return new L(G).getGeom()}}]),e}());return{union:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return z.run("union",t,n)},intersection:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return z.run("intersection",t,n)},xor:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return z.run("xor",t,n)},difference:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return z.run("difference",t,n)}}});
//# sourceMappingURL=polygon-clipping.umd.min.js.map


//Чарт на канвасе
/*!function(t){Date.now=Date.now||function(){return(new Date).getTime()};var e={extend:function(){arguments[0]=arguments[0]||{};for(var t=1;t<arguments.length;t++)for(var i in arguments[t])arguments[t].hasOwnProperty(i)&&("object"==typeof arguments[t][i]?arguments[t][i]instanceof Array?arguments[0][i]=arguments[t][i]:arguments[0][i]=e.extend(arguments[0][i],arguments[t][i]):arguments[0][i]=arguments[t][i]);return arguments[0]},binarySearch:function(t,e){for(var i=0,s=t.length;i<s;){var a=i+s>>1;e<t[a][0]?s=a:i=a+1}return i}};function i(t){this.options=e.extend({},i.defaultOptions,t),this.disabled=!1,this.clear()}function s(t){this.options=e.extend({},s.defaultChartOptions,t),this.seriesSet=[],this.currentValueRange=1,this.currentVisMinValue=0,this.lastRenderTimeMillis=0,this.lastChartTimestamp=0,this.mousemove=this.mousemove.bind(this),this.mouseout=this.mouseout.bind(this)}i.defaultOptions={resetBoundsInterval:3e3,resetBounds:!0},i.prototype.clear=function(){this.data=[],this.maxValue=Number.NaN,this.minValue=Number.NaN},i.prototype.resetBounds=function(){if(this.data.length){this.maxValue=this.data[0][1],this.minValue=this.data[0][1];for(var t=1;t<this.data.length;t++){var e=this.data[t][1];e>this.maxValue&&(this.maxValue=e),e<this.minValue&&(this.minValue=e)}}else this.maxValue=Number.NaN,this.minValue=Number.NaN},i.prototype.append=function(t,e,i){if(!isNaN(t)&&!isNaN(e)){for(var s=this.data.length-1;s>=0&&this.data[s][0]>t;)s--;-1===s?this.data.splice(0,0,[t,e]):this.data.length>0&&this.data[s][0]===t?i?(this.data[s][1]+=e,e=this.data[s][1]):this.data[s][1]=e:s<this.data.length-1?this.data.splice(s+1,0,[t,e]):this.data.push([t,e]),this.maxValue=isNaN(this.maxValue)?e:Math.max(this.maxValue,e),this.minValue=isNaN(this.minValue)?e:Math.min(this.minValue,e)}},i.prototype.dropOldData=function(t,e){for(var i=0;this.data.length-i>=e&&this.data[i+1][0]<t;)i++;0!==i&&this.data.splice(0,i)},s.tooltipFormatter=function(t,e){for(var i,a=[(this.options.timestampFormatter||s.timeFormatter)(new Date(t))],o=0;o<e.length;++o)""!==(i=e[o].series.options.tooltipLabel||"")&&(i+=" "),a.push('<span style="color:'+e[o].series.options.strokeStyle+'">'+i+this.options.yMaxFormatter(e[o].value,this.options.labels.precision)+"</span>");return a.join("<br>")},s.defaultChartOptions={millisPerPixel:20,enableDpiScaling:!0,yMinFormatter:function(t,e){return parseFloat(t).toFixed(e)},yMaxFormatter:function(t,e){return parseFloat(t).toFixed(e)},yIntermediateFormatter:function(t,e){return parseFloat(t).toFixed(e)},maxValueScale:1,minValueScale:1,interpolation:"bezier",scaleSmoothing:.125,maxDataSetLength:2,scrollBackwards:!1,displayDataFromPercentile:1,grid:{fillStyle:"#000000",strokeStyle:"#777777",lineWidth:1,sharpLines:!1,millisPerLine:1e3,verticalSections:2,borderVisible:!0},labels:{fillStyle:"#ffffff",disabled:!1,fontSize:10,fontFamily:"monospace",precision:2,showIntermediateLabels:!1,intermediateLabelSameAxis:!0},title:{text:"",fillStyle:"#ffffff",fontSize:15,fontFamily:"monospace",verticalAlign:"middle"},horizontalLines:[],tooltip:!1,tooltipLine:{lineWidth:1,strokeStyle:"#BBBBBB"},tooltipFormatter:s.tooltipFormatter,nonRealtimeData:!1,responsive:!1,limitFPS:0},s.AnimateCompatibility={requestAnimationFrame:function(t,e){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(function(){t(Date.now())},16)}).call(window,t,e)},cancelAnimationFrame:function(t){return(window.cancelAnimationFrame||function(t){clearTimeout(t)}).call(window,t)}},s.defaultSeriesPresentationOptions={lineWidth:1,strokeStyle:"#ffffff"},s.prototype.addTimeSeries=function(t,i){this.seriesSet.push({timeSeries:t,options:e.extend({},s.defaultSeriesPresentationOptions,i)}),t.options.resetBounds&&t.options.resetBoundsInterval>0&&(t.resetBoundsTimerId=setInterval(function(){t.resetBounds()},t.options.resetBoundsInterval))},s.prototype.removeTimeSeries=function(t){for(var e=this.seriesSet.length,i=0;i<e;i++)if(this.seriesSet[i].timeSeries===t){this.seriesSet.splice(i,1);break}t.resetBoundsTimerId&&clearInterval(t.resetBoundsTimerId)},s.prototype.getTimeSeriesOptions=function(t){for(var e=this.seriesSet.length,i=0;i<e;i++)if(this.seriesSet[i].timeSeries===t)return this.seriesSet[i].options},s.prototype.bringToFront=function(t){for(var e=this.seriesSet.length,i=0;i<e;i++)if(this.seriesSet[i].timeSeries===t){var s=this.seriesSet.splice(i,1);this.seriesSet.push(s[0]);break}},s.prototype.streamTo=function(t,e){this.canvas=t,this.delay=e,this.start()},s.prototype.getTooltipEl=function(){return this.tooltipEl||(this.tooltipEl=document.createElement("div"),this.tooltipEl.className="smoothie-chart-tooltip",this.tooltipEl.style.position="absolute",this.tooltipEl.style.display="none",document.body.appendChild(this.tooltipEl)),this.tooltipEl},s.prototype.updateTooltip=function(){if(this.options.tooltip){var t=this.getTooltipEl();if(this.mouseover&&this.options.tooltip){for(var i=this.lastChartTimestamp,s=this.options.scrollBackwards?i-this.mouseX*this.options.millisPerPixel:i-(this.canvas.offsetWidth-this.mouseX)*this.options.millisPerPixel,a=[],o=0;o<this.seriesSet.length;o++){var n=this.seriesSet[o].timeSeries;if(!n.disabled){var l=e.binarySearch(n.data,s);l>0&&l<n.data.length&&a.push({series:this.seriesSet[o],index:l,value:n.data[l][1]})}}a.length?(t.innerHTML=this.options.tooltipFormatter.call(this,s,a),t.style.display="block"):t.style.display="none"}else t.style.display="none"}},s.prototype.mousemove=function(t){if(this.mouseover=!0,this.mouseX=t.offsetX,this.mouseY=t.offsetY,this.mousePageX=t.pageX,this.mousePageY=t.pageY,this.options.tooltip){var e=this.getTooltipEl();e.style.top=Math.round(this.mousePageY)+"px",e.style.left=Math.round(this.mousePageX)+"px",this.updateTooltip()}},s.prototype.mouseout=function(){this.mouseover=!1,this.mouseX=this.mouseY=-1,this.tooltipEl&&(this.tooltipEl.style.display="none")},s.prototype.resize=function(){var t,e,i=this.options.enableDpiScaling&&window?window.devicePixelRatio:1;this.options.responsive?(t=this.canvas.offsetWidth,e=this.canvas.offsetHeight,t!==this.lastWidth&&(this.lastWidth=t,this.canvas.setAttribute("width",Math.floor(t*i).toString()),this.canvas.getContext("2d").scale(i,i)),e!==this.lastHeight&&(this.lastHeight=e,this.canvas.setAttribute("height",Math.floor(e*i).toString()),this.canvas.getContext("2d").scale(i,i))):1!==i&&(t=parseInt(this.canvas.getAttribute("width")),e=parseInt(this.canvas.getAttribute("height")),this.originalWidth&&Math.floor(this.originalWidth*i)===t||(this.originalWidth=t,this.canvas.setAttribute("width",Math.floor(t*i).toString()),this.canvas.style.width=t+"px",this.canvas.getContext("2d").scale(i,i)),this.originalHeight&&Math.floor(this.originalHeight*i)===e||(this.originalHeight=e,this.canvas.setAttribute("height",Math.floor(e*i).toString()),this.canvas.style.height=e+"px",this.canvas.getContext("2d").scale(i,i)))},s.prototype.start=function(){if(!this.frame){this.canvas.addEventListener("mousemove",this.mousemove),this.canvas.addEventListener("mouseout",this.mouseout);var t=function(){this.frame=s.AnimateCompatibility.requestAnimationFrame(function(){if(this.options.nonRealtimeData){var e=new Date(0),i=this.seriesSet.reduce(function(t,e){var i=e.timeSeries.data,s=Math.round(this.options.displayDataFromPercentile*i.length)-1;if(s=(s=s>=0?s:0)<=i.length-1?s:i.length-1,i&&i.length>0){var a=i[s][0];t=t>a?t:a}return t}.bind(this),e);this.render(this.canvas,i>e?i:null)}else this.render();t()}.bind(this))}.bind(this);t()}},s.prototype.stop=function(){this.frame&&(s.AnimateCompatibility.cancelAnimationFrame(this.frame),delete this.frame,this.canvas.removeEventListener("mousemove",this.mousemove),this.canvas.removeEventListener("mouseout",this.mouseout))},s.prototype.updateValueRange=function(){for(var t=this.options,e=Number.NaN,i=Number.NaN,s=0;s<this.seriesSet.length;s++){var a=this.seriesSet[s].timeSeries;a.disabled||(isNaN(a.maxValue)||(e=isNaN(e)?a.maxValue:Math.max(e,a.maxValue)),isNaN(a.minValue)||(i=isNaN(i)?a.minValue:Math.min(i,a.minValue)))}if(null!=t.maxValue?e=t.maxValue:e*=t.maxValueScale,null!=t.minValue?i=t.minValue:i-=Math.abs(i*t.minValueScale-i),this.options.yRangeFunction){var o=this.options.yRangeFunction({min:i,max:e});i=o.min,e=o.max}if(!isNaN(e)&&!isNaN(i)){var n=e-i-this.currentValueRange,l=i-this.currentVisMinValue;this.isAnimatingScale=Math.abs(n)>.1||Math.abs(l)>.1,this.currentValueRange+=t.scaleSmoothing*n,this.currentVisMinValue+=t.scaleSmoothing*l}this.valueRange={min:i,max:e}},s.prototype.render=function(t,e){var i=Date.now();if(!(this.options.limitFPS>0&&i-this.lastRenderTimeMillis<1e3/this.options.limitFPS)){if(!this.isAnimatingScale){var s=Math.min(1e3/6,this.options.millisPerPixel);if(i-this.lastRenderTimeMillis<s)return}this.resize(),this.updateTooltip(),this.lastRenderTimeMillis=i,t=t||this.canvas,e=e||i-(this.delay||0),e-=e%this.options.millisPerPixel,this.lastChartTimestamp=e;var a=t.getContext("2d"),o=this.options,n={top:0,left:0,width:t.clientWidth,height:t.clientHeight},l=e-n.width*o.millisPerPixel,r=function(t){var e=t-this.currentVisMinValue;return 0===this.currentValueRange?n.height:n.height-Math.round(e/this.currentValueRange*n.height)}.bind(this),h=function(t){return o.scrollBackwards?Math.round((e-t)/o.millisPerPixel):Math.round(n.width-(e-t)/o.millisPerPixel)};if(this.updateValueRange(),a.font=o.labels.fontSize+"px "+o.labels.fontFamily,a.save(),a.translate(n.left,n.top),a.beginPath(),a.rect(0,0,n.width,n.height),a.clip(),a.save(),a.fillStyle=o.grid.fillStyle,a.clearRect(0,0,n.width,n.height),a.fillRect(0,0,n.width,n.height),a.restore(),a.save(),a.lineWidth=o.grid.lineWidth,a.strokeStyle=o.grid.strokeStyle,o.grid.millisPerLine>0){a.beginPath();for(var m=e-e%o.grid.millisPerLine;m>=l;m-=o.grid.millisPerLine){var d=h(m);o.grid.sharpLines&&(d-=.5),a.moveTo(d,0),a.lineTo(d,n.height)}a.stroke(),a.closePath()}for(var u=1;u<o.grid.verticalSections;u++){var c=Math.round(u*n.height/o.grid.verticalSections);o.grid.sharpLines&&(c-=.5),a.beginPath(),a.moveTo(0,c),a.lineTo(n.width,c),a.stroke(),a.closePath()}if(o.grid.borderVisible&&(a.beginPath(),a.strokeRect(0,0,n.width,n.height),a.closePath()),a.restore(),o.horizontalLines&&o.horizontalLines.length)for(var p=0;p<o.horizontalLines.length;p++){var f=o.horizontalLines[p],g=Math.round(r(f.value))-.5;a.strokeStyle=f.color||"#ffffff",a.lineWidth=f.lineWidth||1,a.beginPath(),a.moveTo(0,g),a.lineTo(n.width,g),a.stroke(),a.closePath()}for(var v=0;v<this.seriesSet.length;v++){a.save();var S=this.seriesSet[v].timeSeries;if(!S.disabled){var y=S.data,x=this.seriesSet[v].options;S.dropOldData(l,o.maxDataSetLength),a.lineWidth=x.lineWidth,a.strokeStyle=x.strokeStyle,a.beginPath();for(var b=0,w=0,T=0,P=0,N=0;N<y.length&&1!==y.length;N++){var V=h(y[N][0]),F=r(y[N][1]);if(0===N)b=V,w=F,a.moveTo(V,F);else switch(o.interpolation){case"linear":case"line":a.lineTo(V,F);break;case"bezier":default:a.bezierCurveTo(Math.round((T+V)/2),P,Math.round(T+V)/2,F,V,F);break;case"step":a.lineTo(V,P),a.lineTo(V,F)}T=V,P=F}y.length>1&&(x.fillStyle&&(o.scrollBackwards?(a.lineTo(T,n.height+x.lineWidth),a.lineTo(b,n.height+x.lineWidth),a.lineTo(b,w)):(a.lineTo(n.width+x.lineWidth+1,P),a.lineTo(n.width+x.lineWidth+1,n.height+x.lineWidth+1),a.lineTo(b,n.height+x.lineWidth)),a.fillStyle=x.fillStyle,a.fill()),x.strokeStyle&&"none"!==x.strokeStyle&&a.stroke(),a.closePath()),a.restore()}}if(o.tooltip&&this.mouseX>=0&&(a.lineWidth=o.tooltipLine.lineWidth,a.strokeStyle=o.tooltipLine.strokeStyle,a.beginPath(),a.moveTo(this.mouseX,0),a.lineTo(this.mouseX,n.height),a.closePath(),a.stroke(),this.updateTooltip()),!o.labels.disabled&&!isNaN(this.valueRange.min)&&!isNaN(this.valueRange.max)){var M=o.yMaxFormatter(this.valueRange.max,o.labels.precision),k=o.yMinFormatter(this.valueRange.min,o.labels.precision),B=o.scrollBackwards?0:n.width-a.measureText(M).width-2,L=o.scrollBackwards?0:n.width-a.measureText(k).width-2;a.fillStyle=o.labels.fillStyle,a.fillText(M,B,o.labels.fontSize),a.fillText(k,L,n.height-2)}if(o.labels.showIntermediateLabels&&!isNaN(this.valueRange.min)&&!isNaN(this.valueRange.max)&&o.grid.verticalSections>0){var R=(this.valueRange.max-this.valueRange.min)/o.grid.verticalSections,A=n.height/o.grid.verticalSections;for(u=1;u<o.grid.verticalSections;u++){c=n.height-Math.round(u*A);o.grid.sharpLines&&(c-=.5);var W=o.yIntermediateFormatter(this.valueRange.min+u*R,o.labels.precision);intermediateLabelPos=o.labels.intermediateLabelSameAxis?o.scrollBackwards?0:n.width-a.measureText(W).width-2:o.scrollBackwards?n.width-a.measureText(W).width-2:0,a.fillText(W,intermediateLabelPos,c-o.grid.lineWidth)}}if(o.timestampFormatter&&o.grid.millisPerLine>0){var D=o.scrollBackwards?a.measureText(k).width:n.width-a.measureText(k).width+4;for(m=e-e%o.grid.millisPerLine;m>=l;m-=o.grid.millisPerLine){d=h(m);if(!o.scrollBackwards&&d<D||o.scrollBackwards&&d>D){var E=new Date(m),z=o.timestampFormatter(E),C=a.measureText(z).width;D=o.scrollBackwards?d+C+2:d-C-2,a.fillStyle=o.labels.fillStyle,o.scrollBackwards?a.fillText(z,d,n.height-2):a.fillText(z,d-C,n.height-2)}}}if(""!==o.title.text){a.font=o.title.fontSize+"px "+o.title.fontFamily;var I=o.scrollBackwards?n.width-a.measureText(o.title.text).width-2:2;if("bottom"==o.title.verticalAlign){a.textBaseline="bottom";var X=n.height}else if("middle"==o.title.verticalAlign){a.textBaseline="middle";X=n.height/2}else{a.textBaseline="top";X=0}a.fillStyle=o.title.fillStyle,a.fillText(o.title.text,I,X)}a.restore()}},s.timeFormatter=function(t){function e(t){return(t<10?"0":"")+t}return e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())},t.TimeSeries=i,t.SmoothieChart=s}("undefined"==typeof exports?this:exports);*/


/*! tinyColorPicker - v1.1.1 2016-08-30 */
!function(a,b){"object"==typeof exports?module.exports=b(a):"function"==typeof define&&define.amd?define("colors",[],function(){return b(a)}):a.Colors=b(a)}(this,function(a,b){"use strict";function c(a,c,d,f,g){if("string"==typeof c){var c=v.txt2color(c);d=c.type,p[d]=c[d],g=g!==b?g:c.alpha}else if(c)for(var h in c)a[d][h]=k(c[h]/l[d][h][1],0,1);return g!==b&&(a.alpha=k(+g,0,1)),e(d,f?a:b)}function d(a,b,c){var d=o.options.grey,e={};return e.RGB={r:a.r,g:a.g,b:a.b},e.rgb={r:b.r,g:b.g,b:b.b},e.alpha=c,e.equivalentGrey=n(d.r*a.r+d.g*a.g+d.b*a.b),e.rgbaMixBlack=i(b,{r:0,g:0,b:0},c,1),e.rgbaMixWhite=i(b,{r:1,g:1,b:1},c,1),e.rgbaMixBlack.luminance=h(e.rgbaMixBlack,!0),e.rgbaMixWhite.luminance=h(e.rgbaMixWhite,!0),o.options.customBG&&(e.rgbaMixCustom=i(b,o.options.customBG,c,1),e.rgbaMixCustom.luminance=h(e.rgbaMixCustom,!0),o.options.customBG.luminance=h(o.options.customBG,!0)),e}function e(a,b){var c,e,k,q=b||p,r=v,s=o.options,t=l,u=q.RND,w="",x="",y={hsl:"hsv",rgb:a},z=u.rgb;if("alpha"!==a){for(var A in t)if(!t[A][A]){a!==A&&(x=y[A]||"rgb",q[A]=r[x+"2"+A](q[x])),u[A]||(u[A]={}),c=q[A];for(w in c)u[A][w]=n(c[w]*t[A][w][1])}z=u.rgb,q.HEX=r.RGB2HEX(z),q.equivalentGrey=s.grey.r*q.rgb.r+s.grey.g*q.rgb.g+s.grey.b*q.rgb.b,q.webSave=e=f(z,51),q.webSmart=k=f(z,17),q.saveColor=z.r===e.r&&z.g===e.g&&z.b===e.b?"web save":z.r===k.r&&z.g===k.g&&z.b===k.b?"web smart":"",q.hueRGB=v.hue2RGB(q.hsv.h),b&&(q.background=d(z,q.rgb,q.alpha))}var B,C,D,E=q.rgb,F=q.alpha,G="luminance",H=q.background;return B=i(E,{r:0,g:0,b:0},F,1),B[G]=h(B,!0),q.rgbaMixBlack=B,C=i(E,{r:1,g:1,b:1},F,1),C[G]=h(C,!0),q.rgbaMixWhite=C,s.customBG&&(D=i(E,H.rgbaMixCustom,F,1),D[G]=h(D,!0),D.WCAG2Ratio=j(D[G],H.rgbaMixCustom[G]),q.rgbaMixBGMixCustom=D,D.luminanceDelta=m.abs(D[G]-H.rgbaMixCustom[G]),D.hueDelta=g(H.rgbaMixCustom,D,!0)),q.RGBLuminance=h(z),q.HUELuminance=h(q.hueRGB),s.convertCallback&&s.convertCallback(q,a),q}function f(a,b){var c={},d=0,e=b/2;for(var f in a)d=a[f]%b,c[f]=a[f]+(d>e?b-d:-d);return c}function g(a,b,c){return(m.max(a.r-b.r,b.r-a.r)+m.max(a.g-b.g,b.g-a.g)+m.max(a.b-b.b,b.b-a.b))*(c?255:1)/765}function h(a,b){for(var c=b?1:255,d=[a.r/c,a.g/c,a.b/c],e=o.options.luminance,f=d.length;f--;)d[f]=d[f]<=.03928?d[f]/12.92:m.pow((d[f]+.055)/1.055,2.4);return e.r*d[0]+e.g*d[1]+e.b*d[2]}function i(a,c,d,e){var f={},g=d!==b?d:1,h=e!==b?e:1,i=g+h*(1-g);for(var j in a)f[j]=(a[j]*g+c[j]*h*(1-g))/i;return f.a=i,f}function j(a,b){var c=1;return c=a>=b?(a+.05)/(b+.05):(b+.05)/(a+.05),n(100*c)/100}function k(a,b,c){return a>c?c:b>a?b:a}var l={rgb:{r:[0,255],g:[0,255],b:[0,255]},hsv:{h:[0,360],s:[0,100],v:[0,100]},hsl:{h:[0,360],s:[0,100],l:[0,100]},alpha:{alpha:[0,1]},HEX:{HEX:[0,16777215]}},m=a.Math,n=m.round,o={},p={},q={r:.298954,g:.586434,b:.114612},r={r:.2126,g:.7152,b:.0722},s=function(a){this.colors={RND:{}},this.options={color:"rgba(0,0,0,0)",grey:q,luminance:r,valueRanges:l},t(this,a||{})},t=function(a,d){var e,f=a.options;u(a);for(var g in d)d[g]!==b&&(f[g]=d[g]);e=f.customBG,f.customBG="string"==typeof e?v.txt2color(e).rgb:e,p=c(a.colors,f.color,b,!0)},u=function(a){o!==a&&(o=a,p=a.colors)};s.prototype.setColor=function(a,d,f){return u(this),a?c(this.colors,a,d,b,f):(f!==b&&(this.colors.alpha=k(f,0,1)),e(d))},s.prototype.setCustomBackground=function(a){return u(this),this.options.customBG="string"==typeof a?v.txt2color(a).rgb:a,c(this.colors,b,"rgb")},s.prototype.saveAsBackground=function(){return u(this),c(this.colors,b,"rgb",!0)},s.prototype.toString=function(a,b){return v.color2text((a||"rgb").toLowerCase(),this.colors,b)};var v={txt2color:function(a){var b={},c=a.replace(/(?:#|\)|%)/g,"").split("("),d=(c[1]||"").split(/,\s*/),e=c[1]?c[0].substr(0,3):"rgb",f="";if(b.type=e,b[e]={},c[1])for(var g=3;g--;)f=e[g]||e.charAt(g),b[e][f]=+d[g]/l[e][f][1];else b.rgb=v.HEX2rgb(c[0]);return b.alpha=d[3]?+d[3]:1,b},color2text:function(a,b,c){var d=c!==!1&&n(100*b.alpha)/100,e="number"==typeof d&&c!==!1&&(c||1!==d),f=b.RND.rgb,g=b.RND.hsl,h="hex"===a&&e,i="hex"===a&&!h,j="rgb"===a||h,k=j?f.r+", "+f.g+", "+f.b:i?"#"+b.HEX:g.h+", "+g.s+"%, "+g.l+"%";return i?k:(h?"rgb":a)+(e?"a":"")+"("+k+(e?", "+d:"")+")"},RGB2HEX:function(a){return((a.r<16?"0":"")+a.r.toString(16)+(a.g<16?"0":"")+a.g.toString(16)+(a.b<16?"0":"")+a.b.toString(16)).toUpperCase()},HEX2rgb:function(a){return a=a.split(""),{r:+("0x"+a[0]+a[a[3]?1:0])/255,g:+("0x"+a[a[3]?2:1]+(a[3]||a[1]))/255,b:+("0x"+(a[4]||a[2])+(a[5]||a[2]))/255}},hue2RGB:function(a){var b=6*a,c=~~b%6,d=6===b?0:b-c;return{r:n(255*[1,1-d,0,0,d,1][c]),g:n(255*[d,1,1,1-d,0,0][c]),b:n(255*[0,0,d,1,1,1-d][c])}},rgb2hsv:function(a){var b,c,d,e=a.r,f=a.g,g=a.b,h=0;return g>f&&(f=g+(g=f,0),h=-1),c=g,f>e&&(e=f+(f=e,0),h=-2/6-h,c=m.min(f,g)),b=e-c,d=e?b/e:0,{h:1e-15>d?p&&p.hsl&&p.hsl.h||0:b?m.abs(h+(f-g)/(6*b)):0,s:e?b/e:p&&p.hsv&&p.hsv.s||0,v:e}},hsv2rgb:function(a){var b=6*a.h,c=a.s,d=a.v,e=~~b,f=b-e,g=d*(1-c),h=d*(1-f*c),i=d*(1-(1-f)*c),j=e%6;return{r:[d,h,g,g,i,d][j],g:[i,d,d,h,g,g][j],b:[g,g,i,d,d,h][j]}},hsv2hsl:function(a){var b=(2-a.s)*a.v,c=a.s*a.v;return c=a.s?1>b?b?c/b:0:c/(2-b):0,{h:a.h,s:a.v||c?c:p&&p.hsl&&p.hsl.s||0,l:b/2}},rgb2hsl:function(a,b){var c=v.rgb2hsv(a);return v.hsv2hsl(b?c:p.hsv=c)},hsl2rgb:function(a){var b=6*a.h,c=a.s,d=a.l,e=.5>d?d*(1+c):d+c-c*d,f=d+d-e,g=e?(e-f)/e:0,h=~~b,i=b-h,j=e*g*i,k=f+j,l=e-j,m=h%6;return{r:[e,l,f,f,k,e][m],g:[k,e,e,l,f,f][m],b:[f,f,k,e,e,l][m]}}};return s}),function(a,b){"object"==typeof exports?module.exports=b(a,require("jquery"),require("colors")):"function"==typeof define&&define.amd?define(["jquery","colors"],function(c,d){return b(a,c,d)}):b(a,a.jQuery,a.Colors)}(this,function(a,b,c,d){"use strict";function e(a){return a.value||a.getAttribute("value")||b(a).css("background-color")||"#FFF"}function f(a){return a=a.originalEvent&&a.originalEvent.touches?a.originalEvent.touches[0]:a,a.originalEvent?a.originalEvent:a}function g(a){return b(a.find(r.doRender)[0]||a[0])}function h(c){var d=b(this),f=d.offset(),h=b(a),k=r.gap;c?(s=g(d),s._colorMode=s.data("colorMode"),p.$trigger=d,(t||i()).css(r.positionCallback.call(p,d)||{left:(t._left=f.left)-((t._left+=t._width-(h.scrollLeft()+h.width()))+k>0?t._left+k:0),top:(t._top=f.top+d.outerHeight())-((t._top+=t._height-(h.scrollTop()+h.height()))+k>0?t._top+k:0)}).show(r.animationSpeed,function(){c!==!0&&(y.toggle(!!r.opacity)._width=y.width(),v._width=v.width(),v._height=v.height(),u._height=u.height(),q.setColor(e(s[0])),n(!0))}).off(".tcp").on(D,".cp-xy-slider,.cp-z-slider,.cp-alpha",j)):p.$trigger&&b(t).hide(r.animationSpeed,function(){n(!1),p.$trigger=null}).off(".tcp")}function i(){return b("head")[r.cssPrepend?"prepend":"append"]('<style type="text/css" id="tinyColorPickerStyles">'+(r.css||I)+(r.cssAddon||"")+"</style>"),b(H).css({margin:r.margin}).appendTo("body").show(0,function(){p.$UI=t=b(this),F=r.GPU&&t.css("perspective")!==d,u=b(".cp-z-slider",this),v=b(".cp-xy-slider",this),w=b(".cp-xy-cursor",this),x=b(".cp-z-cursor",this),y=b(".cp-alpha",this),z=b(".cp-alpha-cursor",this),r.buildCallback.call(p,t),t.prepend("<div>").children().eq(0).css("width",t.children().eq(0).width()),t._width=this.offsetWidth,t._height=this.offsetHeight}).hide()}function j(a){var c=this.className.replace(/cp-(.*?)(?:\s*|$)/,"$1").replace("-","_");(a.button||a.which)>1||(a.preventDefault&&a.preventDefault(),a.returnValue=!1,s._offset=b(this).offset(),(c="xy_slider"===c?k:"z_slider"===c?l:m)(a),n(),A.on(E,function(){A.off(".tcp")}).on(C,function(a){c(a),n()}))}function k(a){var b=f(a),c=b.pageX-s._offset.left,d=b.pageY-s._offset.top;q.setColor({s:c/v._width*100,v:100-d/v._height*100},"hsv")}function l(a){var b=f(a).pageY-s._offset.top;q.setColor({h:360-b/u._height*360},"hsv")}function m(a){var b=f(a).pageX-s._offset.left,c=b/y._width;q.setColor({},"rgb",c)}function n(a){var b=q.colors,c=b.hueRGB,e=(b.RND.rgb,b.RND.hsl,r.dark),f=r.light,g=q.toString(s._colorMode,r.forceAlpha),h=b.HUELuminance>.22?e:f,i=b.rgbaMixBlack.luminance>.22?e:f,j=(1-b.hsv.h)*u._height,k=b.hsv.s*v._width,l=(1-b.hsv.v)*v._height,m=b.alpha*y._width,n=F?"translate3d":"",p=s[0].value,t=s[0].hasAttribute("value")&&""===p&&a!==d;v._css={backgroundColor:"rgb("+c.r+","+c.g+","+c.b+")"},w._css={transform:n+"("+k+"px, "+l+"px, 0)",left:F?"":k,top:F?"":l,borderColor:b.RGBLuminance>.22?e:f},x._css={transform:n+"(0, "+j+"px, 0)",top:F?"":j,borderColor:"transparent "+h},y._css={backgroundColor:"#"+b.HEX},z._css={transform:n+"("+m+"px, 0, 0)",left:F?"":m,borderColor:i+" transparent"},s._css={backgroundColor:t?"":g,color:t?"":b.rgbaMixBGMixCustom.luminance>.22?e:f},s.text=t?"":p!==g?g:"",a!==d?o(a):G(o)}function o(a){v.css(v._css),w.css(w._css),x.css(x._css),y.css(y._css),z.css(z._css),r.doRender&&s.css(s._css),s.text&&s.val(s.text),r.renderCallback.call(p,s,"boolean"==typeof a?a:d)}var p,q,r,s,t,u,v,w,x,y,z,A=b(document),B=b(),C="touchmove.tcp mousemove.tcp pointermove.tcp",D="touchstart.tcp mousedown.tcp pointerdown.tcp",E="touchend.tcp mouseup.tcp pointerup.tcp",F=!1,G=a.requestAnimationFrame||a.webkitRequestAnimationFrame||function(a){a()},H='<div class="cp-color-picker"><div class="cp-z-slider"><div class="cp-z-cursor"></div></div><div class="cp-xy-slider"><div class="cp-white"></div><div class="cp-xy-cursor"></div></div><div class="cp-alpha"><div class="cp-alpha-cursor"></div></div></div>',I=".cp-color-picker{position:absolute;overflow:hidden;padding:6px 6px 0;background-color:#444;color:#bbb;font-family:Arial,Helvetica,sans-serif;font-size:12px;font-weight:400;cursor:default;border-radius:5px}.cp-color-picker>div{position:relative;overflow:hidden}.cp-xy-slider{float:left;height:128px;width:128px;margin-bottom:6px;background:linear-gradient(to right,#FFF,rgba(255,255,255,0))}.cp-white{height:100%;width:100%;background:linear-gradient(rgba(0,0,0,0),#000)}.cp-xy-cursor{position:absolute;top:0;width:10px;height:10px;margin:-5px;border:1px solid #fff;border-radius:100%;box-sizing:border-box}.cp-z-slider{float:right;margin-left:6px;height:128px;width:20px;background:linear-gradient(red 0,#f0f 17%,#00f 33%,#0ff 50%,#0f0 67%,#ff0 83%,red 100%)}.cp-z-cursor{position:absolute;margin-top:-4px;width:100%;border:4px solid #fff;border-color:transparent #fff;box-sizing:border-box}.cp-alpha{clear:both;width:100%;height:16px;margin:6px 0;background:linear-gradient(to right,#444,rgba(0,0,0,0))}.cp-alpha-cursor{position:absolute;margin-left:-4px;height:100%;border:4px solid #fff;border-color:#fff transparent;box-sizing:border-box}",J=function(a){q=this.color=new c(a),r=q.options,p=this};J.prototype={render:n,toggle:h},b.fn.colorPicker=function(c){var d=this,f=function(){};return c=b.extend({animationSpeed:150,GPU:!0,doRender:!0,customBG:"#FFF",opacity:!0,renderCallback:f,buildCallback:f,positionCallback:f,body:document.body,scrollResize:!0,gap:4,dark:"#222",light:"#DDD"},c),!p&&c.scrollResize&&b(a).on("resize.tcp scroll.tcp",function(){p.$trigger&&p.toggle.call(p.$trigger[0],!0)}),B=B.add(this),this.colorPicker=p||new J(c),this.options=c,b(c.body).off(".tcp").on(D,function(a){-1===B.add(t).add(b(t).find(a.target)).index(a.target)&&h()}),this.on("focusin.tcp click.tcp",function(a){p.color.options=b.extend(p.color.options,r=d.options),h.call(this,a)}).on("change.tcp",function(){q.setColor(this.value||"#FFF"),d.colorPicker.render(!0)}).each(function(){var a=e(this),d=a.split("("),f=g(b(this));f.data("colorMode",d[1]?d[0].substr(0,3):"HEX").attr("readonly",r.preventFocus),c.doRender&&f.css({"background-color":a,color:function(){return q.setColor(a).rgbaMixBGMixCustom.luminance>.22?c.dark:c.light}})})},b.fn.colorPicker.destroy=function(){b("*").off(".tcp"),p.toggle(!1),B=b()}});
